<div class="comp-markdown Detail_makdownContent__2li0I Detail_makdownContentEn__32n_6"><p>This topic describes the serial protocol that is used to implement serial communication between Tuya’s Wi-Fi module or Wi-Fi and Bluetooth Low Energy (LE) combo module and the third-party MCU.</p>
<img alt="Serial Communication Protocol" src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/16534430870f31277daa9.png" style="zoom: 50%;">
<h2 id="title-0-Serial%20communication" class="comp-markdown-title">Serial communication<i class="iconfont lianjie"></i></h2>
<ul>
<li>Baud: <avayaelement class="contentWrapper"><avayaelement id="dceLink-1" originaltext="9600/115200" callelement="+819600115200" class="dcelink">9600/115200</avayaelement></avayaelement></li>
<li>Data bit: 8</li>
<li>Parity check: none</li>
<li>Stop bit: 1</li>
<li>Data flow control: none</li>
<li>MCU: microcontroller unit. Your MCU communicates with Tuya’s modules through the serial port.</li>
</ul>
<h2 id="title-1-Frame%20format" class="comp-markdown-title">Frame format<i class="iconfont lianjie"></i></h2>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>It is fixed to <code>0x55aa</code>.</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>It is used for updates and extensions.</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>Frame type</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>Big-endian</td>
</tr>
<tr>
<td>Data</td>
<td>N</td>
<td>Entity data</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>All data greater than one byte is transmitted in big-endian format.</p>
</li>
<li>
<p>Generally, one command is sent by one party and received by the other party synchronously.</p>
<p>That is, one party sends a command and waits for a response from the other party. If the sender does not receive a correct response packet within a specified time period, the transmission times out, as shown in the following figure.</p>
 <img alt="Serial Communication Protocol" src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/1631631395a97e6ee3d99.png" style="zoom: 50%;">
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><p>For more information, see the <strong>Protocol list</strong>.</p>
</div></div>
</li>
<li>
<p>The module sends control commands and the MCU reports data point (DP) status, which occurs asynchronously. Assume that the module sends a command <code>X</code> and the MCU reports a command <code>Y</code>. The data transmission is as follows.</p>
<ul>
<li>
<p>The module sends a control command:</p>
 <img alt="Serial Communication Protocol" src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/16316314867c639c7edfc.png" style="zoom: 50%;">
</li>
<li>
<p>The MCU reports status:</p>
 <img alt="Serial Communication Protocol" src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/1631631564d8a3a6b22f4.png" style="zoom: 50%;">
</li>
</ul>
</li>
<li>
<p>The version field</p>
<p>The version number is used to distinguish between the old and legacy version. To provide compatibility with new and legacy protocols, the module queries the MCU version using the command <code>0x00</code> and determines which protocol version it should use accordingly. The new protocol defaults to <code>0x03</code>.</p>
</li>
</ul>
<p><a id="StatusDataType"></a></p>
<h2 id="title-2-Serial%20buffer%20size%20of%20module" class="comp-markdown-title">Serial buffer size of module<i class="iconfont lianjie"></i></h2>
<table>
<thead>
<tr>
<th>Chipset platform</th>
<th>Size of the receive buffer</th>
<th>Size of the send buffer</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>ESP8266</td>
<td>256 bytes</td>
<td>256 bytes</td>
<td>The buffer size is fixed.</td>
</tr>
<tr>
<td>Others</td>
<td>A minimum of 1,024 bytes</td>
<td>A minimum of 1,024 bytes</td>
<td>If the firmware supports the file transfer feature, the maximum buffer size depends on the maximum size of a single packet transmitted.</td>
</tr>
</tbody>
</table>
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><p>The length of the whole packet (including all bytes from <strong>header</strong> to <strong>checksum</strong>) sent from the MCU to the module must not exceed the maximum size of the receive buffer of the module. Otherwise, transmission errors might occur.</p>
</div></div>
<h2 id="title-3-Data%20units" class="comp-markdown-title">Data units<i class="iconfont lianjie"></i></h2>
<p>The DP command and status data units are defined as follows:</p>
<table>
<thead>
<tr>
<th>Data segment</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>dpid</td>
<td>1</td>
<td>The ID of a DP.</td>
</tr>
<tr>
<td>type</td>
<td>1</td>
<td>The data type of a DP defined on the <a href="https://iot.tuya.com" target="_blank">Tuya IoT Development Platform</a>. For more information, see the description of the <code>type</code> fields in the following table.</td>
</tr>
<tr>
<td>len</td>
<td>2</td>
<td>The bytes of a <code>value</code>. For more information, see the description of the <code>type</code> fields in the following table.</td>
</tr>
<tr>
<td>Value</td>
<td>1/2/4/N</td>
<td>Represented in hexadecimal format. Data greater than one byte is transmitted in big-endian format.</td>
</tr>
</tbody>
</table>
<p>Description of the <code>type</code> fields</p>
<table>
<thead>
<tr>
<th>type</th>
<th>Data type</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0x00</td>
<td>Raw</td>
<td>N</td>
<td>Represents a DP of raw data type. The data is passed through the module to the cloud.</td>
</tr>
<tr>
<td>0x01</td>
<td>Boolean</td>
<td>1</td>
<td>Represents a DP of Boolean data type. Valid values include <code>0x00</code> and <code>0x01</code>.</td>
</tr>
<tr>
<td>0x02</td>
<td>Value</td>
<td>4</td>
<td>Represents a DP of integer type. The data is represented in big-endian format.</td>
</tr>
<tr>
<td>0x03</td>
<td>String</td>
<td>N</td>
<td>Represents a DP of string type.</td>
</tr>
<tr>
<td>0x04</td>
<td>Enum</td>
<td>1</td>
<td>Represents a DP of enum type, ranging from 0 to 255.</td>
</tr>
<tr>
<td>0x05</td>
<td>Bitmap</td>
<td>1/2/4</td>
<td>Represents a DP of fault type. Data greater than one byte is represented in big-endian format.</td>
</tr>
</tbody>
</table>
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>Except for the <code>raw</code> data type, all others belong to the <code>object</code> type.</li>
<li>The status data can contain data units of multiple DPs.</li>
</ul>
</div></div>
<h2 id="title-4-Protocol%20list" class="comp-markdown-title">Protocol list<i class="iconfont lianjie"></i></h2>
<h3 id="title-5-Send%20heartbeats" class="comp-markdown-title">Send heartbeats<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>After the Wi-Fi module is powered on, it keeps sending a heartbeat to the MCU every one second and waits for a response. If the module receives a response to a heartbeat, it will send a heartbeat every 15 seconds and run the initialization command. Otherwise, the module will keep sending a heartbeat to the MCU every one second until receiving a response.</p>
</li>
<li>
<p>The MCU can determine whether the module works properly by detecting heartbeats. If the module fails to send a heartbeat, the MCU can use the reset pin to reset the module. If the MCU fails to respond to a heartbeat within three seconds, the module determines the MCU is offline.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 00 00 00 ff</code></p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td><ul><li>0x00: The MCU returns this value only one time after a restart. The module uses this value to determine whether the MCU restarts during operation.</li><li> 0x01: The MCU returns this value except for the first response after a restart.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<ul>
<li>For example, the MCU returns <code>55 aa 03 00 00 01 00 03</code> after a restart.</li>
<li>The MCU returns <code>55 aa 03 00 00 01 01 04</code> except for the first response after a restart.</li>
</ul>
<p><a id="ProductInfoQuery"></a></p>
<h3 id="title-6-Query%20product%20information" class="comp-markdown-title">Query product information<i class="iconfont lianjie"></i></h3>
<p>Product information consists of the product ID and MCU software version number.</p>
<ul>
<li>Product ID (PID): It is automatically generated for each product created on the <a href="https://iot.tuya.com" target="_blank">Tuya IoT Development Platform</a> for storing product information in the cloud.</li>
<li>MCU software version number: It is expressed in dot-decimal notation, <code>x.x.x</code>. <code>x</code> is a decimal digit between 0 and 99.</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x01</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 01 00 00 00</code></p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x01</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>N</td>
</tr>
<tr>
<td>Data</td>
<td>N</td>
<td>{“p”:“AIp08kLIftb8x***”, “v”:“1.0.0”, “m”:1, “mt”:10, “n”:0, “ir”:“5.12”, “low”:0}</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>{"p":"AIp08kLIftb8x***","v":"1.0.0","m":1,"mt":10,"n":0,"ir":"5.12","low":0}</code></p>
<p>Field description:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>p</td>
<td>Indicates the product ID is <code>Ip08kLIftb8x***</code>, which is the PID of a product created on the Tuya IoT Development Platform.</td>
</tr>
<tr>
<td>v</td>
<td>Indicates the MCU version is <code>1.0.0</code>. The version number must be defined in the format <code>x.x.x</code>.</td>
</tr>
<tr>
<td>m</td>
<td>Indicates the operation mode of the module.<ul><li> <code>0</code>: active pairing. The module automatically enters the pairing mode and waits for pairing after startup.</li><li> <code>1</code>: passive pairing. The module does not enter the pairing mode after startup until the MCU sends the reset command. In pairing mode, if the module is not paired within three minutes, it will automatically exit the pairing mode.</li><li> <code>2</code>: Anti-misoperation mode A paired device that is physically reset will resume its network connection if it is not paired within three minutes. Similarly, if a device that is physically reset is shut down due to an outage, it will resume its network connection after startup. In this mode, if a user removed a device from the app, the network connection history of this device will be cleared. You can implement this mode for devices with a physical reset button or switch to prevent unintended device reset.</li></ul></td>
</tr>
<tr>
<td>mt</td>
<td>Indicates the switching time period between the safe mode and anti-misoperation mode. You can set a period between 3 and 10 minutes. If you leave this field empty, the period defaults to 3 minutes.</td>
</tr>
<tr>
<td>n</td>
<td>Indicates the network pairing mode. If you leave this field empty, the pairing mode is switched between the Wi-Fi Easy Connect (EZ) mode and the access point (AP) mode.<ul><li> <code>0</code> indicates both the EZ mode and AP mode are supported. This enables automatic switching between these two modes. For more information, see <a href="#MonitorDeviceConnection">Report network status</a>.</li><li> <code>1</code> indicates only the AP mode is supported.</li></ul></td>
</tr>
<tr>
<td>ir</td>
<td>Used to enable the infrared (IR) feature and notify the module of the IR transmission (TX) pin and IR reception (RX) pin. If you leave this field empty, the IR feature is disabled. For example, <code>5.12</code> indicates the IR TX pin is I/O 5 and the IR RX pin is I/O 12.<blockquote> <strong>Note</strong>: If the module works in the self-processing mode, the IR I/Os must not be used for the reset button or the Wi-Fi status indicator. For cross-module I/O configuration, the pin number plus 32 makes the pin number we need. For example, the pin number to be set for PB20 is 52 (20 + 32 = 52). The IR TX pin requires PWM signals. The IR RX pin requires I/O interrupts. For more information about the pin configuration, see the datasheet of your modules.</blockquote> If you want to enable the IR status indicator, see <a href="#New">(Optional) Notification of new feature setting</a> and configure it.</td>
</tr>
<tr>
<td>low</td>
<td>Used to enable the low power mode. If you leave this field empty, the low power mode is disabled. In low power mode, when a device is connected to the router but not executing any commands, its power consumption can be lower than 15 mA on average. When the Wi-Fi and Bluetooth combo module runs in low power mode, it only supports Bluetooth pairing without device control. If power consumption is not your concern, you can leave this field as is.<ul><li> <code>0</code>: disable low power mode.</li><li>  <code>1</code>: enable low power mode.</li></ul></td>
</tr>
<tr>
<td>vt</td>
<td>Indicates the MCU firmware type, which defaults to <code>9</code>. You can set a value between 10 and 19 to specify a firmware type. Your specified value must match the value of the field <strong>Update Channel</strong> that appears when you add firmware on the Tuya IoT Development Platform.</td>
</tr>
</tbody>
</table>
<div styled-block="" data-style-warn=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><p>The value of <code>vt</code> you specified in the SDK must be consistent with the value of <strong>Update Channel</strong> specified on the Tuya IoT Development Platform. Otherwise, the device cannot receive OTA updates or receives the wrong OTA updates.</p>
</div></div>
<h3 id="title-7-Query%20working%20mode" class="comp-markdown-title">Query working mode<i class="iconfont lianjie"></i></h3>
<p>The working mode means how the Wi-Fi status is indicated and the module is reset. Two modes are available.</p>
<ul>
<li>
<p>The MCU works with the module to process network events.</p>
<p>When the MCU detects a pairing signal, it notifies the module of performing network reset through serial communication. The module sends the current Wi-Fi status to the MCU through serial communication. The MCU executes status indications accordingly. Home appliances usually use this mode.</p>
</li>
<li>
<p>The module processes network events itself.</p>
<p>The GPIO pin on the module drives the LED indicator to indicate the network status. The GPIO input signal determines module reset.</p>
<p>When the module detects a low level on the GPIO input pin for more than five seconds, it will trigger a reset action. The following command specifies the GPIO pins of the LED indicator and the reset button.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x02</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 02 00 00 01</code></p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x02</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td><ul><li> 0x0000: The module works with the MCU to process network events. The MCU must implement the required features mentioned above. </li><li>0x0002/0x0003: The module processes network events itself.</li></ul></td>
</tr>
<tr>
<td>Data</td>
<td>0/2/3</td>
<td>The data length is 2 bytes. <br>The first byte represents the GPIO pin used to indicate Wi-Fi status. The second byte represents the GPIO pin used to reset the Wi-Fi network.</td>
</tr>
<tr>
<td>Data</td>
<td>0/2/3</td>
<td><p>If data length is <strong>2</strong> bytes:</p><p>Data[0]: represents the GPIO pin used to indicate Wi-Fi status.</p><p>Data[1]: represents the GPIO pin used to reset the Wi-Fi network.</p><p>If data length is <strong>3</strong> bytes:</p><p>Data[0]: represents the GPIO pin used to indicate Wi-Fi status.</p><p>Data[1]: represents the GPIO pin used to reset the Wi-Fi network.</p><p>Data[3]: represents the GPIO pin used to indicate Bluetooth LE status.</p></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<ul>
<li>
<p>The MCU works with the module to process network events.</p>
<p><code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-2" originaltext="03 02 00 00 04" callelement="+81302000004" class="dcelink">03 02 00 00 04</avayaelement></avayaelement></code></p>
</li>
<li>
<p>The module processes network events itself. <code>0x0c</code> indicates the LED indicator is connected to GPIO12. <code>0x0d</code> indicates the reset button is connected to GPIO13.</p>
<p><code>55 aa 03 02 00 02 0c 0d 1f</code></p>
</li>
</ul>
<p><a id="New"></a></p>
<h3 id="title-8-(Optional)%20Notification%20of%20new%20feature%20setting" class="comp-markdown-title">(Optional) Notification of new feature setting<i class="iconfont lianjie"></i></h3>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>After the device is powered on, the MCU sends this command to notify the module of feature configuration after the command <code>0x01</code> and before the command <code>0x02</code>.</li>
<li>If no new feature configuration is required, the MCU does not need to send this command.</li>
<li>The MCU must send this command each time after the module is powered on or the module is restarted.</li>
<li>The fields of this command will be added as the service is extended.</li>
</ul>
</div></div>
<p><a id="ir"></a></p>
<ul>
<li>
<p><code>ir</code>: IR status indicator. It can share the same GPIO pin with the Wi-Fi status indicator but must not conflict with other GPIOs associated with the command <code>0x02</code>. The IR status indicator is defined as follows.</p>
<ul>
<li>Sharing the same GPIO pin with the Wi-Fi status indicator: The LED is on when the IR is idle. The LED is off when the IR is used.</li>
<li>Using an individual GPIO pin: The LED is on when the IR is used. The LED is off when the IR is idle.</li>
</ul>
</li>
<li>
<p><code>buf</code>: the maximum buffer size of the MCU serial port. For the RF remote control feature, when multiple key values are transmitted, the buffer size depends on whether key values are transmitted using multiple packets.</p>
</li>
<li>
<p>RF remote control: the 433 MHz RF remote controls developed with the Tuya standard RF solution.</p>
</li>
</ul>
<p>For the RF remote control feature, when multiple key values are transmitted, the buffer size depends on whether key values are transmitted using multiple packets.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x00</td>
</tr>
<tr>
<td></td>
<td>{ “mcu_ota”:xx, “abv”:x, “ir”:xx, “buf”:xx }</td>
<td><ul><li> <code>mcu_ota</code>: specifies whether an MCU has a scratchpad. <code>0x00</code>: The MCU has a scratchpad. <br> <code>0x01</code>: The MCU does not have a scratchpad.</li><li><code>abv</code>: enables features.</li><li>Bit0: Bluetooth connection notification (applies to Wi-Fi and Bluetooth combo modules). <code>1</code>: enable. <code>0</code>: disable.</li><li> Bit1: RF remote control. <code>1</code>: enable. <code>0</code>: disable.</li><li>Bit2-bit7: reserved, defaulting to <code>0</code>.</li><li> <code>ir</code>: sets the GPIO pin used for IR status indicator in the module self-processing mode.  The data content follows the definition of the command <code>0x02</code>. For more information, see <a href="#ir">IR feature</a>.</li><li> <code>buf</code>: the MCU serial receive buffer, with a minimum size of 256 bytes. If the buffer size is not specified, the module considers the MCU can receive data of any length.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the MCU has a scratchpad, the RF remote control is enabled, and the buffer size is 1024 bytes, the MCU sends the following command. <code>{"mcu_ota":0,"abv":3,"buf":1024}</code></p>
<p><code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-3" originaltext="03 37 00 20 00" callelement="+81337002000" class="dcelink">03 37 00 20 00</avayaelement></avayaelement>7b 22 6d 63 75 5f 6f 74 61 22 3a 30 2c <avayaelement class="contentWrapper"><avayaelement id="dceLink-31" originaltext="22 61 62 76 22" callelement="+812261627622" class="dcelink">22 61 62 76 22</avayaelement></avayaelement> 3a 33 2c <avayaelement class="contentWrapper"><avayaelement id="dceLink-32" originaltext="22 62 75 66 22" callelement="+812262756622" class="dcelink">22 62 75 66 22</avayaelement></avayaelement> 3a 31 30 32 34 7d ab</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x00</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>0x00: success.  <br>0x01: invalid data.  <br>0x02: failure.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 37 00 02 00 00 3b</code></p>
<p>Field description:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>mcu_ota</td>
<td>No</td>
<td>Specifies whether an MCU has a scratchpad. This field only applies to HomeKit accessories currently.</td>
</tr>
<tr>
<td>abv</td>
<td>No</td>
<td>Enables new features. Each bit represents a feature.<ul><li>Bit0: Bluetooth connection notification (applies to Wi-Fi and Bluetooth combo modules). <code>1</code>: enable. <code>0</code>: disable.</li><li> Bit1: RF remote control. <code>1</code>: enable. <code>0</code>: disable.</li><li>Bit2-bit7: reserved, defaulting to <code>0</code>.</li></ul></td>
</tr>
<tr>
<td>ir</td>
<td>No</td>
<td>Sets the GPIO pin used for IR status indicator in the module self-processing mode. The data content follows the definition of the command <code>0x02</code>. For example, <code>5</code> indicates the GPIO 5 is used for IR status indicator.</td>
</tr>
<tr>
<td>buf</td>
<td>No</td>
<td>The MCU serial receive buffer, with a minimum size of 256 bytes.</td>
</tr>
</tbody>
</table>
<p><a id="MonitorDeviceConnection"></a></p>
<h3 id="title-9-Report%20network%20status" class="comp-markdown-title">Report network status<i class="iconfont lianjie"></i></h3>
<table>
<thead>
<tr>
<th>Network status</th>
<th>Description</th>
<th>Status value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Status 1</td>
<td>Pairing in EZ mode (For Wi-Fi and Bluetooth LE combo module: Bluetooth is also in pairing mode.)</td>
<td>0x00</td>
</tr>
<tr>
<td>Status 2</td>
<td>Pairing in AP mode (For Wi-Fi and Bluetooth LE combo module: Bluetooth is also in pairing mode.)</td>
<td>0x01</td>
</tr>
<tr>
<td>Status 3</td>
<td>The Wi-Fi network is set up, but the device is not connected to the router.</td>
<td>0x02</td>
</tr>
<tr>
<td>Status 4</td>
<td>The Wi-Fi network is set up, and the device is connected to the router.</td>
<td>0x03</td>
</tr>
<tr>
<td>Status 5</td>
<td>The device is connected to the cloud.</td>
<td>0x04</td>
</tr>
<tr>
<td>Status 6</td>
<td>Tuya’s network module is in low power mode.</td>
<td>0x05</td>
</tr>
<tr>
<td>Status 7</td>
<td>EZ mode and AP mode coexist. (For Wi-Fi and Bluetooth LE combo module: Bluetooth is also in pairing mode.)</td>
<td>0x06</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>Network status</p>
<ul>
<li>Pairing in EZ mode (For Wi-Fi and Bluetooth LE combo module: Bluetooth is also in pairing mode.)</li>
<li>Pairing in AP mode (For Wi-Fi and Bluetooth LE combo module: Bluetooth is also in pairing mode.)</li>
<li>The Wi-Fi network is set up, but the device is not connected to the router.</li>
<li>The Wi-Fi network is set up, and the device is connected to the router.</li>
<li>The device is connected to the cloud.</li>
</ul>
</li>
<li>
<p>The LED activity in the module self-processing mode.</p>
<ul>
<li>Status 1: blinking every 250 ms.</li>
<li>Status 2: blinking every 1,500 ms.</li>
<li>Status 3 or 6: steady off.</li>
<li>Status 4 or 5: steady on.</li>
</ul>
</li>
<li>
<p>When the module detects that the MCU is restarted or reconnected, it will proactively send the current Wi-Fi status to the MCU.</p>
</li>
<li>
<p>When the network status changes, the module will proactively send the current status to the MCU.</p>
</li>
<li>
<p>If you choose the module self-processing mode, implementing this protocol for your MCU is not necessary.</p>
</li>
</ul>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>For devices using the Wi-Fi and Bluetooth LE combo module, when the network status is <code>0x00</code>, <code>0x01</code>, or <code>0x06</code>, Bluetooth is also in pairing mode.</li>
<li>Network status <code>0x04</code> indicates a device is successfully paired either over Wi-Fi or Bluetooth.</li>
<li>It is recommended to subscribe to <a href="#BleStatus">Report Bluetooth connection status</a> to notify users of the current Bluetooth status.</li>
</ul>
</div></div>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Indicates Wi-Fi status. <ul><li> 0x00: status 1 </li><li>0x01: status 2 </li><li>0x02: status 3 </li><li>0x03: status 4 </li><li>0x04: status 5 </li><li>0x05: status 6 </li><li>0x06: status 7 </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 03 00 01 00 03</code></p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-4" originaltext="03 03 00 00 05" callelement="+81303000005" class="dcelink">03 03 00 00 05</avayaelement></avayaelement></code></p>
<p><a id="resetWifi"></a></p>
<h3 id="title-10-Reset%20Wi-Fi%20connection" class="comp-markdown-title">Reset Wi-Fi connection<i class="iconfont lianjie"></i></h3>
<p>When receiving a reset command, the module will restart, perform an initialization operation, and enter the pairing mode.</p>
<ul>
<li>
<p>The following figure shows how the working status of the module changes after a reset.</p>
  <img alt="Serial Communication Protocol" src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/16534456472c03b305c70.png" style="zoom: 50%;">
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>The reset command must be sent after the module initialization is completed. Otherwise, the reset might not work. For more information, see <a href="https://developer.tuya.com/en/docs/iot/mcu-protocol?id=K9hrdpyujeotg#title-6-Module%20initialization" target="_blank">Module initialization</a>.</li>
<li>After the Wi-Fi and Bluetooth LE combo module receives the reset command, both the Wi-Fi and Bluetooth LE networks are reset and ready for connection.</li>
</ul>
</div></div>
</li>
<li>
<p>If you choose the module self-processing mode, implementing this protocol for your MCU is not necessary.</p>
<p>When the module detects a low level on the GPIO input pin for more than five seconds, it will trigger a reset action.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x04</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-5" originaltext="03 04 00 00 06" callelement="+81304000006" class="dcelink">03 04 00 00 06</avayaelement></avayaelement></code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x04</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 04 00 00 03</code></p>
<h3 id="title-11-Reset%20Wi-Fi%20and%20select%20pairing%20mode" class="comp-markdown-title">Reset Wi-Fi and select pairing mode<i class="iconfont lianjie"></i></h3>
<p>This command is similar to the previous one of resetting the Wi-Fi connection.</p>
<ul>
<li>
<p>The difference lies in that this command allows the MCU to select a pairing mode after the <a href="#resetWifi">network is reset</a>.</p>
</li>
<li>
<p>You can implement this protocol as needed.</p>
</li>
<li>
<p>If you choose the module self-processing mode, implementing this protocol for your MCU is not necessary.</p>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>The reset command must be sent after the module initialization is completed. Otherwise, the reset might not work. For more information, see <a href="https://developer.tuya.com/en/docs/iot/mcu-protocol?id=K9hrdpyujeotg#title-6-Module%20initialization" target="_blank">Module initialization</a>.</li>
<li>If the MCU sets the <code>n</code> field in <a href="#ProductInfoQuery">Query product information</a>, the pairing mode specified by this command does not work.</li>
</ul>
</div></div>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x05</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td><ul><li>0x00: Enter EZ mode. </li><li>0x01: Enter AP mode. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, to enter EZ mode, the MCU will send the following command.</p>
<p><code>55 aa 03 05 00 01 00 08</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x05</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 05 00 00 04</code></p>
<p><a id="Send-commands"></a></p>
<h3 id="title-12-Send%20commands" class="comp-markdown-title">Send commands<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>The command sent by the module can contain <a href="#StatusDataType">Data units</a> of multiple DPs.</p>
</li>
<li>
<p>The command sending is processed asynchronously. The module parses the received data and sends it to the MCU. The MCU executes the command accordingly and reports the changed DP status if required.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x06</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>Depends on the type and number of data units.</td>
</tr>
<tr>
<td>Data</td>
<td>N</td>
<td><a href="#StatusDataType">Data units</a></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if DP 3 of a boolean type is used for on/off control, and <code>1</code> means to turn on the device, the module will send the following command.</p>
<p><code>55 aa 00 06 00 05 03 01 00 01 01 10</code></p>
<p><a id="StatusReport"></a></p>
<h3 id="title-13-Report%20status%20(async)" class="comp-markdown-title">Report status (async)<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>This is an asynchronous command. The MCU uses it to report DP status to the module, which can be triggered by three mechanisms.</p>
<ul>
<li>After the MCU executes the command received from the module, it reports the changed DP status to the module.</li>
<li>When the MCU proactively detects status changes of DPs, it reports the changed DP status to the module.</li>
<li>When the MCU receives the DP <a href="#StatusQuery">status query</a>, it sends the status of all DPs to the module.</li>
</ul>
</li>
<li>
<p>The MCU can report the status of multiple DPs. For more information about the DP status data unit, see <a href="#StatusDataType">Data units</a>.</p>
</li>
</ul>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>It is recommended to report the status of a DP when it is changed to ensure stable data transmission. Try to avoid frequent status reporting for a short period of time.</li>
<li>When the device is in the idle or stable state, make sure the frequency of reporting the status of the same DP is appropriate. The recommended minimum interval is one minute.</li>
<li>The DP that the MCU reports must match the PID’s DP defined on the <a href="https://iot.tuya.com/" target="_blank">Tuya IoT Development Platform</a>. The PID is the value of the <code>p</code> field that the MCU returns on the <a href="#ProductInfoQuery">product information query</a>. The MCU must not report any DP that does not exist.</li>
<li>The DP ID, data type, and payload of the DP that the MCU reports must match the PID’s DP defined on the <a href="https://iot.tuya.com/" target="_blank">Tuya IoT Development Platform</a>. The PID is the value of the <code>p</code> field that the MCU returns on the <a href="#ProductInfoQuery">product information query</a>.</li>
</ul>
</div></div>
<p><strong>The MCU sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x07</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>It depends on the types and the number of data units.</td>
</tr>
<tr>
<td>Data</td>
<td>N</td>
<td><a href="#StatusDataType">Data units</a></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if DP 5 of a value type is used for reporting the current humidity, and the current humidity is 30%, the MCU will send the following data to the module.</p>
<p><code>55 aa 03 07 00 08 05 02 00 04 00 00 00 1e 3a</code></p>
<p><strong>Report data units of multiple DPs:</strong></p>
<p>The DP 109 is of Boolean data type, and its value is <code>1</code>.</p>
<p>The DP 102 is of string data type, and its value is <code>201804121507</code>. The value is transferred in ASCII mode.</p>
<p>The MCU will send the following data to the module.</p>
<p><code>55 aa 03 07 00 15 6d 01 00 01 01 66 03 00 0c 32 30 31 38 30 34 31 32 31 35 30 37 62</code></p>
<h3 id="title-14-Report%20status%20(sync)" class="comp-markdown-title">Report status (sync)<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>This is a synchronous command. The MCU reports DP status and then waits for the result from the module.</p>
</li>
<li>
<p>The module must respond to each status reporting message. The MCU must not send a new reporting task until receiving a response from the module.</p>
</li>
<li>
<p>If the data fails to be reported to the cloud due to poor network quality, the module will return a failure code five seconds later. In this case, the MCU should wait for more than five seconds.</p>
</li>
<li>
<p>The MCU can report the status of multiple DPs. For more information about the DP status data unit, see <a href="#StatusDataType">Data units</a>.</p>
</li>
</ul>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>It is recommended to report the status of a DP when it is changed to ensure stable data transmission. Try to avoid frequent status reporting for a short period of time.</li>
<li>When the device is in the idle or stable state, make sure the frequency of reporting the status of the same DP is appropriate. The recommended minimum interval is one minute.</li>
<li>The DP that the MCU reports must match the PID’s DP defined on the <a href="https://iot.tuya.com/" target="_blank">Tuya IoT Development Platform</a>. The PID is the value of the <code>p</code> field that the MCU returns on the <a href="#ProductInfoQuery">product information query</a>. The MCU must not report any DP that does not exist.</li>
<li>The DP ID, data type, and payload of the DP that the MCU reports must match the PID’s DP defined on the <a href="https://iot.tuya.com/" target="_blank">Tuya IoT Development Platform</a>. The PID is the value of the <code>p</code> field that the MCU returns on the <a href="#ProductInfoQuery">product information query</a>.</li>
</ul>
</div></div>
<p><strong>The MCU sends the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x22</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>It depends on the types and the number of <strong>data units</strong>.</td>
</tr>
<tr>
<td>Data</td>
<td>N</td>
<td><a href="#StatusDataType">Data units</a></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, the status of Boolean DP 1 is <code>true</code>, the MCU reports the following data to the module:</p>
<p><code>55 aa 03 22 00 05 02 01 00 01 01 2e</code></p>
<p><strong>The module returns the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x23</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td><ul><li><code>0x00</code>: Failure</li><li><code>0x01</code>: Success</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, the module returns <code>55 aa 00 23 00 01 01 24</code>.</p>
<h3 id="title-15-Report%20status%20(record-type)" class="comp-markdown-title">Report status (record-type)<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>This is a synchronous command. The MCU reports DP status and then waits for the result from the module.</p>
</li>
<li>
<p>The module must respond to each status reporting message. The MCU must not send a new reporting task until receiving a response from the module.</p>
</li>
<li>
<p>If the data fails to be reported to the cloud due to poor network quality, the module will return a failure code five seconds later. In this case, the MCU should wait for more than five seconds.</p>
</li>
<li>
<p>The MCU can report the status of multiple DPs. For more information about the DP status data unit, see <a href="#StatusDataType">Data units</a>.</p>
</li>
<li>
<p>For devices with records or metering features, such as door locks and smart plugs with energy monitoring, you can use this command to report the status of the corresponding DPs. If a single record message contains the status of multiple DPs, it should be reported in one packet.</p>
</li>
<li>
<p>This type of status reporting only applies to Wi-Fi protocol currently. The Bluetooth protocol support for this type of status reporting will be added in the firmware update in the future.</p>
</li>
<li>
<p>Before using this type of status reporting, check if the current firmware supports it.</p>
</li>
</ul>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>The module does not cache the data that fails to be reported.</li>
<li>It is recommended to report the status of a DP when it is changed to ensure stable data transmission. Try to avoid frequent status reporting for a short period of time.</li>
<li>When the device is in the idle or stable state, make sure the frequency of reporting the status of the same DP is appropriate. The recommended minimum interval is one minute.</li>
<li>The DP that the MCU reports must match the PID’s DP defined on the <a href="https://iot.tuya.com/" target="_blank">Tuya IoT Development Platform</a>. The PID is the value of the <code>p</code> field that the MCU returns on the <a href="#ProductInfoQuery">product information query</a>. The MCU must not report any DP that does not exist.</li>
<li>The DP ID, data type, and payload of the DP that the MCU reports must match the PID’s DP defined on the <a href="https://iot.tuya.com/" target="_blank">Tuya IoT Development Platform</a>. The PID is the value of the <code>p</code> field that the MCU returns on the <a href="#ProductInfoQuery">product information query</a>.</li>
</ul>
</div></div>
<p><strong>The MCU sends the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>It depends on the types and the number of <strong>data units</strong>.</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x0b (subcommand)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>0x01 (default)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>The time data carried in the payload:<ul><li><code>0x00</code>: Use the time on the module, which requires that the module have synced clock with the server.</li><li><code>0x01</code>: Use the local time.</li><li><code>0x02</code>: Use the GMT.</li></ul></td>
</tr>
<tr>
<td></td>
<td>6</td>
<td>Date and time format:<ul><li>Data[0] indicates the year. <code>0x00</code> indicates the year 2000.</li><li>Data[1] indicates the month, ranging from 1 to 12.</li><li>Data[2] indicates the day, ranging from 1 to 31.</li><li>Data[3] indicates the hour, ranging from 0 to 23.</li><li>Data[4] indicates the minute, ranging from 0 to 59.</li><li>Data[5] indicates the second, ranging from 0 to 59.</li></ul></td>
</tr>
<tr>
<td></td>
<td>N</td>
<td><a href="#StatusDataType">Data units</a></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, for the Boolean DP of DP ID 1, if its status is <code>true</code>, and the GMT is <code><avayaelement class="contentWrapper"><avayaelement id="dceLink-6" originaltext="2022.02.18.16" callelement="+812022021816" class="dcelink">2022.02.18.16</avayaelement></avayaelement>:27:06</code>, the MCU reports <code>55 aa 03 34 00 0e 0b 01 02 16 02 12 10 1b 06 01 01 00 01 01 b1</code> to the module.</p>
<p>For example, for the value DP of DP ID 2, its status is <code>100</code>; for the enum DP of DP ID 3, its status is <code>3</code>. If the local time is <code><avayaelement class="contentWrapper"><avayaelement id="dceLink-7" originaltext="2022.02.22.11" callelement="+812022022211" class="dcelink">2022.02.22.11</avayaelement></avayaelement>:22:33</code>, the MCU reports <code>55 aa 03 34 00 16 0b 01 01 16 02 16 0b 16 21 02 02 04 00 00 00 64 03 04 01 03 40</code> to the module.</p>
<p><strong>The module returns the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x0b (subcommand)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>The result of status reporting:<ul><li><code>0x00</code>: Success</li><li><code>0x02</code>: Failure</li><li><code>0x03</code>: Invalid data</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 34 00 02 0b 00 40</code></p>
<p><a id="StatusQuery"></a></p>
<h3 id="title-16-Query%20DP%20status" class="comp-markdown-title">Query DP status<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>The module asynchronously queries the status of all object DPs. When the MCU receives queries, it sends the status of DPs to the module. For more information, see <a href="#StatusReport">Report status</a>.</p>
</li>
<li>
<p>The module sends DP status queries when the following two events occur.</p>
<ul>
<li>When powered on for the first time, the module builds communication with the MCU and then sends status queries.</li>
<li>When the module detects the MCU is restarted or disconnected and then goes online, the module sends status queries.</li>
</ul>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x08</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 08 00 00 07</code></p>
<h3 id="title-17-Update%20MCU%20firmware" class="comp-markdown-title">Update MCU firmware<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>You can specify the update method for OTA MCU firmware updates. The module only serves as the channel for OTA data transmission, without any data parsing operation.</p>
</li>
<li>
<p>The Tuya IoT Development Platform provides four update methods.</p>
<ul>
<li>Update notification: Users receive a firmware update notification on the app and choose whether to install updates.</li>
<li>Automatic update: Users will not receive any update pop-up window. The module checks for firmware updates within one minute after power-on. If any new version is available, it will automatically pull the updates. The module checks for updates every 24 hours after the first-time power-on.</li>
<li>Forced update: Users receive a firmware update notification on the app and have no option but to update the firmware.</li>
<li>Check for updates: Users will not receive a firmware update notification on the app but need to manually check for new updates.</li>
</ul>
</li>
<li>
<p>The following flowchart shows how the OTA firmware update works.<br>
After the module has sent all update packages, it will send the command <code>0x01</code> to <a href="#ProductInfoQuery">query the product information</a>. The MCU must reply with the new MCU firmware version number within one minute. The new version number should be consistent with that configured on the Tuya IoT Development Platform.</p>
 <img alt="Serial Communication Protocol" src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/1631631805543b29047dc.png" style="zoom: 50%;">
</li>
</ul>
<h4 id="subtitle-18-Start%20OTA%20update" class="comp-markdown-title">Start OTA update<i class="iconfont lianjie"></i></h4>
<p>The OTA update can be initiated automatically or manually. For automatic updates, when the module detects MCU firmware updates from the cloud, the transmission of the update package automatically starts. For manual updates, the module initiates updates only when updates are confirmed on the app.</p>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x0a</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0004</td>
</tr>
<tr>
<td>Data</td>
<td>4</td>
<td>The size of the update package. The data type is an unsigned integer, and the data is stored in big-endian format.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 0a 00 04 00 00 68 00 75</code></p>
<p>It indicates the size of the update package is 26624 bytes, namely 26 KB.</p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x0a</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>The update package size of a single packet: <ul><li>0x00: 256 bytes by default, compatible with legacy firmware </li><li>0x01: 512 bytes </li><li>0x02: 1024 bytes </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 0a 00 01 00 0d</code></p>
<h4 id="subtitle-19-Transmit%20update%20package" class="comp-markdown-title">Transmit update package<i class="iconfont lianjie"></i></h4>
<ul>
<li>
<p>The data format of update package transmission: packet offset + packet data.</p>
</li>
<li>
<p>If the MCU receives the frame with a data length equal to 4 bytes and the packet offset is equal to or greater than the size of firmware, the transmission ends.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x0b</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0004+N</td>
</tr>
<tr>
<td>Data</td>
<td>4+N</td>
<td>data[0] to data[3]: fixed to packet offset. <br>data[4] to data[n]: the packet content.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<p>The size of the update file is 530 bytes. The MCU can skip the response to the last packet.</p>
<ul>
<li>For the first packet, the packet offset is <code>0x00000000</code>, and the packet length is 256 bytes.<br>
<code>55 aa 00 0b 01 04 00000000 xx…xx XX</code></li>
<li>For the second packet, the packet offset is <code>0x00000100</code>, and the packet length is 256 bytes.<br>
<code>55 aa 00 0b 01 04 00000100 xx…xx XX</code></li>
<li>For the third packet, the packet offset is <code>0x00000200</code>, and the packet length is 18 bytes.<br>
<code>55 aa 00 0b 00 16 00000200 xx…xx XX</code></li>
<li>For the last packet, the packet offset is <code>0x00000212</code>, and the packet length is 0 bytes.<br>
<code>55 aa 00 0b 00 04 00000212 xx…xx XX</code></li>
</ul>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x0b</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 0b 00 00 0d</code></p>
<p><a id="QueryServerTime"></a></p>
<h3 id="title-18-Get%20system%20time%20in%20GMT" class="comp-markdown-title">Get system time in GMT<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>As the international standard of civil time, GMT is independent of the time zone and DST.</p>
</li>
<li>
<p>After connecting to the network, the module returns success and valid time data after the local timestamp is synced.</p>
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>For a device using the Wi-Fi and Bluetooth LE combo module, the MCU can request the time data when it receives the <a href="#BleStatus">Bluetooth status</a> value of <code>0x03</code>. When the device connects to the mobile app, the app must have access to the internet.</li>
<li>When the MCU receives the <a href="#MonitorDeviceConnection">Wi-Fi status</a> value of <code>0x04</code>, the module will start syncing time with the time server.</li>
<li>If you do not want the MCU to proactively request time data after power on, you can <a href="#TimeNoty">turn on time service notification</a> to enable the module to send the MCU time data after it finishes time sync.</li>
</ul>
</div></div>
<div styled-block="" data-style-warn=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>It takes time to sync time. If the MCU requests the time data immediately after receiving the network status from the module, the request might fail. In this case, the MCU should try to send the request again.</li>
<li>For Wi-Fi and Bluetooth LE combo modules, only the latest firmware version supports time sync over Bluetooth.</li>
<li>If time sync over Bluetooth does not work with the latest firmware version, submit a service ticket to request technical support.</li>
</ul>
</div></div>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x0c</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 0c 00 00 0e</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x0c</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0007</td>
</tr>
<tr>
<td>Data</td>
<td>7</td>
<td>The data length is 7 bytes. <ul><li>Data[0]: indicates whether the system time is obtained successfully. <code>0</code>: failure. <code>1</code>: success. </li><li>Data[1]: indicates the year. <code>0x00</code> represents the year 2000. </li><li>Data[2]: indicates the month, ranging from 1 to 12. </li><li>Data[3]: indicates the day, ranging from 1 to 31. </li><li>Data[4]: indicates the hour, ranging from 0 to 23. </li><li>Data[5]: indicates the minute, ranging from 0 to 59. </li><li>Data[6]: indicates the second, ranging from 0 to 59.  </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the system time is 05:06:07 on April 19, 2016 (GMT), the module will return the following command.</p>
<p><code>55 aa 00 0c 00 07 01 10 04 13 05 06 07 4c</code></p>
<p><a id="QueryLocalTime"></a></p>
<h3 id="title-19-Get%20local%20time" class="comp-markdown-title">Get local time<i class="iconfont lianjie"></i></h3>
<ul>
<li>The local time is calculated by adding the time zone offset and DST to the GMT. The time zone is where the device is activated.</li>
<li>After connecting to the network, the module returns success and valid time data after the local timestamp is synced.</li>
</ul>
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>For a device using the Wi-Fi and Bluetooth LE combo module, the MCU can request the time data when it receives the <a href="#BleStatus">Bluetooth status</a> value of <code>0x03</code>. When the device connects to the mobile app, the app must have access to the internet.</li>
<li>When the MCU receives the <a href="#MonitorDeviceConnection">Wi-Fi status</a> value of <code>0x04</code>, the module will start syncing time with the time server.</li>
<li>If you do not want the MCU to proactively request time data after power on, you can <a href="#TimeNoty">turn on time service notification</a> to enable the module to send the MCU time data after it finishes time sync.</li>
</ul>
</div></div>
<div styled-block="" data-style-warn=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>It takes time to sync time. If the MCU requests the time data immediately after receiving the network status from the module, the request might fail. In this case, the MCU should try to send the request again.</li>
<li>For Wi-Fi and Bluetooth LE combo modules, only the latest firmware version supports time sync over Bluetooth.</li>
<li>If time sync over Bluetooth does not work with the latest firmware version, submit a service ticket to request technical support.</li>
</ul>
</div></div>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x1c</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 1c 00 00 1e</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x1c</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0008</td>
</tr>
<tr>
<td>Data</td>
<td>8</td>
<td>The data length is 8 bytes. <ul><li>Data[0]: indicates whether the local time is obtained successfully. <code>0</code>: failure. <code>1</code>: success. </li><li>Data[1]: indicates the year. <code>0x00</code> represents the year 2000. </li><li>Data[2]: indicates the month, ranging from 1 to 12. </li><li>Data[3]: indicates the day, ranging from 1 to 31. </li><li>Data[4]: indicates the hour, ranging from 0 to 23. </li><li>Data[5]: indicates the minute, ranging from 0 to 59. </li><li>Data[6]: indicates the second, ranging from 0 to 59. </li><li>Data[7]: indicates the week, ranging from 1 to 7. <code>1</code> indicates Monday.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>If the device is activated in mainland China, the local time is Beijing time (GMT+08:00).<br>
For example, if the local time is 05:06:07 on April 19, 2016 (GMT+08:00), the module will return the following command.<br>
<code>55 aa 00 1c 00 08 01 10 04 13 05 06 07 02 5f</code></p>
</li>
<li>
<p>If the device is activated in other countries or regions, the local time is the time zone in which the device is located.</p>
</li>
</ul>
<h3 id="title-20-Test%20Wi-Fi%20functionality%20(scanning)" class="comp-markdown-title">Test Wi-Fi functionality (scanning)<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>The module scans the router whose SSID is <code>tuya_mdev_test</code> and returns the result and signal strength in percentage.</p>
</li>
<li>
<p>To prevent quality defects, it is recommended that the distance between the router and the device under test should be about 5 meters. If the signal strength is greater than or equal to 60%, the device is acceptable. The specific testing conditions depend on your production line and environment.</p>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><p>The test command must be sent after the module initialization is completed. Otherwise, the command might not work. For more information, see <a href="https://developer.tuya.com/en/docs/iot/mcu-protocol?id=K9hrdpyujeotg#title-6-Module%20initialization" target="_blank">Module initialization</a>.</p>
</div></div>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x0e</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 0e 00 00 10</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x0e</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>2</td>
<td>The data length is 2 bytes. <ul><li>Data[0]: <code>0x00</code> indicates failure and <code>0x01</code> indicates success. </li><li>If Data[0] is <code>0x01</code>, Data[1] indicates the signal strength, ranging from 0 to 100, 0 for the weakest and 100 for the strongest. </li><li>If Data[0] is <code>0x00</code>, Data[1] indicates failure reasons. <code>0x00</code> indicates the specified SSID is not found. <code>0x01</code> indicates the authorization key is not flashed to the module.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the module does not find the specified SSID, it returns <code>55 aa 00 0e 00 02 00 00 0f</code>.</p>
<h3 id="title-21-Get%20module%E2%80%99s%20memory" class="comp-markdown-title">Get module’s memory<i class="iconfont lianjie"></i></h3>
<p>Get the remaining memory of the Wi-Fi module.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x0f</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 0f 00 00 11</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x0f</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0004</td>
</tr>
<tr>
<td>Data</td>
<td>4</td>
<td>The data length is 4 bytes. The value is represented in big-endian format. <br>For example, <code>0x00 0x00 0x28 0x00</code> represents 10240 bytes remaining memory.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the remaining memory size is 53,328 bytes, the module returns <code>55 aa 00 0f 00 04 50 d0 00 00 32</code>.</p>
<h3 id="title-22-(Optional)%20Enable%20weather%20services" class="comp-markdown-title">(Optional) Enable weather services<i class="iconfont lianjie"></i></h3>
<p>Enable the module to get the weather data.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x20</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>N((L+K)+(L+K)…)</td>
</tr>
<tr>
<td>Data</td>
<td>n</td>
<td><code>L</code>: consumes 1 byte and indicates the length of <code>K</code>. <br><code>K</code>: indicates the name of the request parameter. <br><strong>Example:</strong> <ul><li> <code>L</code>: <code>0x06</code>, <code>K</code>: <code>w.temp</code>. </li><li><code>L</code>: <code>0x06</code>, <code>K</code>: <code>w.pm25</code>. </li><li><code>L</code>: <code>0x0a</code>, <code>K</code>: <code>w.humidity</code>.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For more information about the weather data, see <a href="https://developer.tuya.com/en/docs/iot/weather-function-description?id=Ka6dcs2cw4avp" target="_blank">Weather Service</a>.<br>
For example, if the MCU requests <code>w.temp</code> and <code>w.pm25</code>, it sends <code>55 aa 03 20 00 0e 06 77 2e 74 65 6d 70 06 77 2e 70 6d 32 35 80</code>.</p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x20</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>2</td>
<td>Data[0]:<ul><li> 0x00: failure. </li><li>0x01: success. </li></ul> Data[1]: <ul><li>0x00: no error. </li><li>0x01: invalid data format. </li><li>0x02: exception.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 20 00 02 01 00 22</code></p>
<h3 id="title-23-(Optional)%20Send%20weather%20data" class="comp-markdown-title">(Optional) Send weather data<i class="iconfont lianjie"></i></h3>
<p>The module will send the weather data immediately as the weather service is enabled and then sends data every 30 minutes.</p>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x21</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>N((LKTLV)+(LKTLV)+…)</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td><ul><li>0x00: indicates a failure. </li><li>0x01: indicates an unauthorized parameter service. Check whether you have subscribed to specific weather services or whether you have enabled the weather services through the <code>0x20</code> command. </li><li>0x01: indicates a success. <br><code>L</code>: the length of the parameter name. <br><code>K</code>: the name of the parameter. <br><code>T</code>: 0x00 indicates an integer and 0x01 indicates a string. <br><code>L</code>: the length of the field name. <br><code>V</code>: the value of the field.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x21</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>
<p>If a request contains two request parameters such as <code>w.temp</code> and <code>w.pm25</code>, only <code>w.temp</code> returns a value, you need to check whether the request parameter name is correct.</p>
</li>
<li>
<p>For more information about the weather data, see <a href="https://developer.tuya.com/en/docs/iot/weather-function-description?id=Ka6dcs2cw4avp" target="_blank">Weather Service</a>.</p>
</li>
</ul>
</div></div>
<p>For example, if the weather data is <code>w.humidity:69</code>, <code>w.temp:32</code>, and <code>w.pm25:10</code>, the module will send the following command.<br>
<code>55 aa 00 21 00 30 01 0a 77 2e 68 75 6d 69 64 69 74 79 00 04 00 00 00 45 06 77 2e 74 65 6d 70 00 04 00 00 00 20 06 77 2e 70 6d 32 35 00 04 00 00 00 10 1e 5c</code></p>
<h3 id="title-24-Proactively%20request%20weather%20data" class="comp-markdown-title">Proactively request weather data<i class="iconfont lianjie"></i></h3>
<ul>
<li>Besides passively receiving weather data from the module, the MCU can proactively request weather data using this command.</li>
<li>The minimum request interval is one minute. If the MCU sends multiple requests within one minute, the request is only processed once.</li>
<li>The module only uses this command to confirm a request and sends weather data still through the command <code>0x21</code>.</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x03 (subcommand)</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-8" originaltext="03 34 00 01 03" callelement="+81334000103" class="dcelink">03 34 00 01 03</avayaelement></avayaelement> 3a</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x03 (subcommand)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: success.  </li><li> 0x01: failure.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 34 00 02 03 00 38</code></p>
<h3 id="title-25-(Optional)%20Get%20Wi-Fi%20signal%20strength" class="comp-markdown-title">(Optional) Get Wi-Fi signal strength<i class="iconfont lianjie"></i></h3>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x24</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>Data</td>
<td>N</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-9" originaltext="03 24 00 00 26" callelement="+81324000026" class="dcelink">03 24 00 00 26</avayaelement></avayaelement></code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x24</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td>0x00: failure. <br>A value less than 0: indicates signal strength, such as -60 dB.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the value of RSSI is -20 dB, the module returns <code>55 aa 00 24 00 01 ec 10</code>.</p>
<h3 id="title-26-(Optional)%20Disable%20heartbeats" class="comp-markdown-title">(Optional) Disable heartbeats<i class="iconfont lianjie"></i></h3>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x25</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>Data</td>
<td>N</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-10" originaltext="03 25 00 00 27" callelement="+81325000027" class="dcelink">03 25 00 00 27</avayaelement></avayaelement></code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x25</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0</td>
</tr>
<tr>
<td>Data</td>
<td>N</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 25 00 00 24</code></p>
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><p>Before the module goes to sleep for reducing power consumption, the MCU can send this command to notify the module to disable the heartbeat. Because heartbeats are required for building communication between the module and the MCU, this command must not be sent when the device is just powered on.</p>
</div></div>
<h3 id="title-27-(Optional)%20Pairing%20via%20serial%20port" class="comp-markdown-title">(Optional) Pairing via serial port<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>If your device pairing solution is implementing by the communication between the mobile app and the module, implementing this command is not necessary.</p>
</li>
<li>
<p>This command applies to local pairing. You can get the pairing information from Tuya’s app and send them to the module through serial communication to complete pairing.</p>
</li>
<li>
<p>To be paired via serial port, the module must be in the state of waiting for pairing.</p>
</li>
<li>
<p>The module will use the received information to connect to the router and register in the cloud.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2A</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>xx</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td><code>{"s":"xxx","p":"yyy","t":"zzz"}</code> <ul><li><code>s</code>: SSID </li><li><code>p</code>: password </li><li><code>t</code>: token, generated by the mobile app.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the pairing information is <code>{"s":"xxx","p":"12345678","t":"zzz"}</code>, the MCU will return the following command.<br>
<code>55 aa 03 2a 00 24 7b 22 73 22 3a <avayaelement class="contentWrapper"><avayaelement id="dceLink-11" originaltext="22 78 78 78 22" callelement="+812278787822" class="dcelink">22 78 78 78 22</avayaelement></avayaelement> 2C 22 70 22 3a 22 31 32 33 34 35 36 37 38 22 2c 22 74 22 3a 22 7a 7a 7a 22 7d B7</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2A</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>x</td>
<td><ul><li> 0x00: Data is received. </li><li>0x01: The module is not waiting for pairing. </li><li>0x02: JSON data is invalid. </li><li>0x03: Other errors occur. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 2a 00 01 01 2b</code></p>
<h3 id="title-28-Get%20Wi-Fi%20status" class="comp-markdown-title">Get Wi-Fi status<i class="iconfont lianjie"></i></h3>
<table>
<thead>
<tr>
<th>Network status</th>
<th>Description</th>
<th>Status value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Status 1</td>
<td>Pairing in EZ mode.</td>
<td>0x00</td>
</tr>
<tr>
<td>Status 2</td>
<td>Pairing in AP mode.</td>
<td>0x01</td>
</tr>
<tr>
<td>Status 3</td>
<td>The Wi-Fi network is set up, but the device is not connected to the router.</td>
<td>0x02</td>
</tr>
<tr>
<td>Status 4</td>
<td>The Wi-Fi network is set up, and the device is connected to the router.</td>
<td>0x03</td>
</tr>
<tr>
<td>Status 5</td>
<td>The device is connected to the cloud.</td>
<td>0x04</td>
</tr>
<tr>
<td>Status 6</td>
<td>The device is in low power mode.</td>
<td>0x05</td>
</tr>
<tr>
<td>Status 7</td>
<td>EZ mode and AP mode coexist.</td>
<td>0x06</td>
</tr>
</tbody>
</table>
<p>The status definition must be consistent with that in <a href="#MonitorDeviceConnection">Report network status</a>.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2B</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code> 55 aa 03 2b 00 00 2d</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2B</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td><ul><li> 0x00: Pairing in EZ mode. </li><li>0x01: Pairing in AP mode. </li><li>0x02: The Wi-Fi network is set up, but the device is not connected to the router. </li><li>0x03: The Wi-Fi network is set up, and the device is connected to the router. </li><li>0x04: The device is connected to the router and the cloud. </li><li>0x05: The device is in low power mode. </li><li>0x06: EZ mode and AP mode coexist.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the device is connected to the router and the cloud, the module returns <code>55 aa 00 2b 00 01 04 2f</code>.</p>
<h3 id="title-29-(Optional)%20Map%20streaming%20for%20robot%20vacuum" class="comp-markdown-title">(Optional) Map streaming for robot vacuum<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>Only specific modules support map streaming services for robot vacuums, which must be purchased to use.</p>
</li>
<li>
<p>This service serves as a quick channel for the map data transmission between the mobile app and the robot vacuum.</p>
</li>
<li>
<p>The map data is identified by the map ID. Data of the same map ID is processed as one cleaning task by the mobile app.</p>
</li>
<li>
<p>The robot vacuum goes around the whole house during cleaning. However, if the wireless signals in some areas are weak, data upload might fail. In this case, with sufficient memory, the module can store 24 pieces of the data cache.</p>
 <img alt="Serial Communication Protocol" src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/goat/20200909/6de6960c32fe486ea568cd629daa0e3d.png" style="zoom: 30%;">
</li>
</ul>
<h4 id="subtitle-32-Map%20data%20streaming" class="comp-markdown-title">Map data streaming<i class="iconfont lianjie"></i></h4>
<ul>
<li>
<p>For streaming data of a complete map, the map data offset indicates the total length of data that has been sent.</p>
</li>
<li>
<p>The maximum serial buffer of the module is 1024 bytes. A packet of map data cannot exceed 1024 bytes. The recommended size of each packet is 512 bytes.</p>
</li>
<li>
<p>The map ID indicates a cleaning map. The robot builds a map of the cleaning area each time it starts a new cleaning job that a new map ID will be assigned to. When the map ID is changed, the map data displayed on the mobile app will be replaced with the current map.</p>
</li>
<li>
<p>After data transmission starts, the module will stop sending heartbeats to ensure the map data traffic is prioritized. The heartbeat will not be resumed unless the module is restarted after a shutdown.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x28</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0006+N</td>
</tr>
<tr>
<td>Data</td>
<td>2</td>
<td>data[0] to data[1]: the map ID, an identifier of a map created for a cleaning task.</td>
</tr>
<tr>
<td></td>
<td>4</td>
<td>data[2] to data[5]: the map data offset, which is 0 for the first packet.</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td>data[6] to data[N]: the entity data in big-endian format.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the map ID is <code>123</code> and the map data offset is <code>0</code>, the MCU will send the following command.<br>
<code>55 aa 03 28 xx xx 00 7b 00 00 00 00 xx xx xx xx xx </code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x28</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td><ul><li> 0x00: Success. </li><li>0x01: Streaming service is not enabled. </li><li>0x02: Failed to connect to the streaming server. </li><li>0x03: Data transmission times out. </li><li>0x04: Data length error.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 28 00 01 00 28</code></p>
<h3 id="title-30-(Optional)%20Map%20data%20streaming%20for%20multiple%20maps" class="comp-markdown-title">(Optional) Map data streaming for multiple maps<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>Only specific modules support map streaming services for robot vacuums, which must be purchased to use.</p>
</li>
<li>
<p>This service serves as a quick channel for the map data transmission between the mobile app and the robot vacuum.</p>
</li>
<li>
<p>This command applies to transmitting the map that is made up of several maps.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x30</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0009+N</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>The map service protocol: 0x00</td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>Map service session ID: an identifier of a map displayed on the mobile app.</td>
</tr>
<tr>
<td></td>
<td>6</td>
<td>BUF[0]: the ID of a sub-map. A map session can be made up of several maps, such as route maps. <br>BUF[1]: The processing method for the map data of a sub-map ID. 0x00: The map data is accumulated. 0x01: The map data is cleared. <br>BUF[2] to BUF[5]: the sub-map data offset, which is 0 for the first packet.</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td>The entity data in big-endian format.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 30 00 xx 00 00 00 01 00 00 00 00 xx xx xx xx xx xx</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x30</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x00: success. <br>0x01: failure.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 30 00 01 00 33 </code></p>
<h3 id="title-31-(Optional)%20Get%20the%20map%20session%20ID" class="comp-markdown-title">(Optional) Get the map session ID<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>This command is a supplement to the map streaming service for single and multiple maps.</p>
</li>
<li>
<p>The module manages the map session ID. Before the MCU transmits a new map, it will request a map session ID from the module and include the allocated session ID in each session data transmission. The sub-map ID is incremented by 1 as a new sub-map is added, such as <code>0x01</code>, <code>0x02</code>, <code>0x03</code>, and more.</p>
</li>
<li>
<p>If you do not want the module to manage the session ID, implementing this command is not necessary.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x06 (subcommand)</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 30 00 01 00 33 </code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0004</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x06 (subcommand)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Transmission result: <br> 0x00: Success. <br> 0x01: The map streaming service is not enabled. <br> 0x02: Failed to get the session ID.</td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>The map session ID. If the transmission fails, this data is invalid.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 34 00 04 06 00 00 00 3d</code></p>
<h3 id="title-32-Test%20Wi-Fi%20functionality%20(connection)" class="comp-markdown-title">Test Wi-Fi functionality (connection)<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>The MCU sends the SSID and password of a router to the module. The module scans for this designated router.</p>
</li>
<li>
<p>The MCU determines whether the module is connected to the designated router based on the received <a href="#MonitorDeviceConnection">network status</a>. The test is considered failed if the MCU receives a failure or does not receive a result of a successful connection within 15 seconds.</p>
</li>
<li>
<p>The MCU can send the test command to enable the module to enter test mode again even after a successful test. However, if the MCU does not receive a result of a successful connection, it indicates the module is in the test progress. In this case, the module must be reset or restarted, and then the MCU sends the test command.</p>
</li>
<li>
<p>Make sure that the module has not paired. Otherwise, the test will fail.</p>
</li>
<li>
<p>Before the test, make sure that the MCU has responded to the heartbeat and product information query from the module and the initialization is completed.</p>
</li>
<li>
<p>The maximum length of the SSID and password is 32 bytes and 64 bytes respectively.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2C</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>n</td>
</tr>
<tr>
<td>Data</td>
<td>n</td>
<td><code>{"ssid":"xxx","password":"xxxxxxxx"}</code> <ul><li><code>ssid</code>: the name of the router. </li><li><code>password</code>: the password of the router. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the SSID and password is <code>{"ssid":"xxx","password":"12345678"}</code>, the MCU will send the following command.<br>
<code>55 aa 03 2c 00 24 7b 22 73 73 69 64 22 3a <avayaelement class="contentWrapper"><avayaelement id="dceLink-12" originaltext="22 78 78 78 22" callelement="+812278787822" class="dcelink">22 78 78 78 22</avayaelement></avayaelement> 2c 22 70 61 73 73 77 6f 72 64 22 3a 22 31 32 33 34 35 36 37 38 22 7d 2c</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2C</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>The data length is one byte. <br>Data[0]: <ul><li>0x00: Failed to receive the router information. Check whether the JSON packet is complete. </li><li>0x01: router information is received. Regarding the connection result, view the <a href="#MonitorDeviceConnection">network status</a>.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 2c 00 01 01 2d</code></p>
<h3 id="title-33-Get%20module%E2%80%99s%20MAC%20address" class="comp-markdown-title">Get module’s MAC address<i class="iconfont lianjie"></i></h3>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2d</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 2d 00 00 2f</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2d</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0007</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td>Data[0]: indicates whether the MAC address is obtained successfully. <ul><li>0x00 indicates success and the next 6 bytes denote a valid MAC address. </li><li>0x01 indicates failure and the next 6 bytes denote an invalid MAC address. </li></ul> Data[1] to Data[6]: indicates the valid MAC address of the module on a success.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the MAC address is <code>508A0E3A2D9</code>, the module returns the following command.<br>
<code>55 aa 00 2d 00 07 00 50 8a 06 e3 a2 d9 71</code></p>
<h3 id="title-34-(Optional)%20IR%20status%20notification" class="comp-markdown-title">(Optional) IR status notification<i class="iconfont lianjie"></i></h3>
<table>
<thead>
<tr>
<th>IR status</th>
<th>Description</th>
<th>Status value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Status 1</td>
<td>IR code is being sent.</td>
<td>0x00</td>
</tr>
<tr>
<td>Status 2</td>
<td>IR code is sent.</td>
<td>0x01</td>
</tr>
<tr>
<td>Status 3</td>
<td>IR learning is in progress.</td>
<td>0x02</td>
</tr>
<tr>
<td>Status 4</td>
<td>IR learning is completed.</td>
<td>0x03</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>You can configure the IR feature on the Tuya IoT Development Platform or contact your project manager to enable this feature.</p>
</li>
<li>
<p>The short retention of IR code availability determines that serial data is sent directly without a resending mechanism.</p>
</li>
<li>
<p>You can configure the IR status indication as needed.</p>
</li>
<li>
<p>The IR TX and RX pins require two I/Os. If your module processes network events itself, do not use the IR pins for other configurations.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2e</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td>IR status indication: <ul><li>0x00: status 1 </li><li>0x01: status 2 </li><li>0x02: status 3 </li><li>0x03: status 4 </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 2e 00 01 00 2e</code></p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2e</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 2e 00 00  30</code></p>
<h3 id="title-35-(Optional)%20IR%20functionality%20test" class="comp-markdown-title">(Optional) IR functionality test<i class="iconfont lianjie"></i></h3>
<p><img alt="Serial Communication Protocol" src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/goat/20200909/9c07c8b0af2146c999f88fb75300dfe3.png"></p>
<ul>
<li>
<p>Only the unpaired module can enter IR test mode.</p>
</li>
<li>
<p>The module enters IR learning status as it enters test mode.</p>
</li>
<li>
<p>Once the module enters test mode, it is in IR learning status and keeps transmitting the learned code until the module is paired or powered off.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2f</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 2f 00 00 31</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x2f</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td><ul><li>0x00: The module successfully enters test mode. </li><li>0x01: The module failed to enter test mode.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 2f 00 01 00 2f </code></p>
<h3 id="title-36-(Optional)%20RF%20functionality" class="comp-markdown-title">(Optional) RF functionality<i class="iconfont lianjie"></i></h3>
<ul>
<li>
<p>To use RF functionality, you need to enable the RF remote control in the <code>abv</code> field through the command <code>0x3700</code>.</p>
</li>
<li>
<p>When you use the RF code, multiple key values might be transmitted in a single operation. According to the maximum data length of the key value, the MCU serial buffer must be larger than 256 bytes. The MCU can use the <code>buf</code> field in the command <code>0x3700</code> to notify the module of the MCU serial buffer size.<br>
When multiple key values are to be transmitted in a single operation, the module can determine whether to transmit data in multiple packets based on the MCU serial buffer. The minimum packet size is a key value.  For transmission of multiple key values, data of all key values is sent using one command by default.</p>
</li>
<li>
<p>Since the MCU executes RF commands, the module is not intended to process status indication itself.</p>
</li>
</ul>
<h4 id="subtitle-40-RF%20learning%20control" class="comp-markdown-title">RF learning control<i class="iconfont lianjie"></i></h4>
<ul>
<li>The module sends commands to control the RF learning status of the MCU.</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x33</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x01 (RF learning command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>RF leaning status: <br>0x01: enter the RF learning status. <br>0x02: exit the RF learning status.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 33 00 02 01 01 36</code></p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x33</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0003</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x01</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>RF leaning status: <br>0x01: enter the RF learning status.</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Acknowledgement status: <br>0x00: Success. <br>0x02: Exit the RF learning status. <br>0x01: Failure.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 33 00 03 01 01 00 3a</code></p>
<h4 id="subtitle-41-Send%20RF%20data" class="comp-markdown-title">Send RF data<i class="iconfont lianjie"></i></h4>
<ul>
<li>
<p>A piece of RF data can consist of multiple key values. If a piece of RF data exceeds the serial buffer capacity, key values can be transmitted in multiple packets.</p>
</li>
<li>
<p>RF data has a fixed encoding. The transmission time of each bit depends on the transmission rate. If a bit is <code>1</code>, data is transmitted. If a bit is <code>0</code>, data is not transmitted and the high bit is transmitted first.</p>
</li>
<li>
<p>The MCU only needs to parse the <code>Data</code> field without the fields of frequency and transmission rate.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x33</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x07+n*(T+D+I+L+C)</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x02</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Type: <ul><li> 0x00: send code library </li><li>0x01: send learning code</li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>The number of key values: n</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>The serial number of the key value offset: <ul><li>0xFF: send all key values in one packet. </li><li> 0x00 to 0xFE: offset value, which is 0 for the first packet. The number of key values for the last packet is <code>-1</code>. </li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Frequency: <ul><li>0: 315 MHz </li><li>1: 433.92 MHz </li></ul></td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>Transmission rate: such as 2,777 bps</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td>Data <ul><li> <strong>T:</strong> <strong>stands for times.</strong> It is <strong>1 byte in length</strong> and indicates the number of transmission times.  If the module sends <strong>learning code</strong>, this data is valid and defaults to <strong>0x00</strong>.</li><li> <strong>D: stands for delay.</strong> It is <strong>2 bytes</strong> in length and indicates the interval between key values.  If the module sends <strong>learning code</strong>, this data is valid and defaults to <strong>0x0000</strong>. </li><li><strong>I: stands for intervals.</strong> It is <strong>2 bytes</strong> in length and indicates the transmission interval.  If the module sends <strong>learning code</strong>, this data is valid and defaults to <strong>0x0000</strong>. </li><li><strong>L: stands for code length.</strong> It is <strong>2 bytes</strong> in length and indicates the length of data sent by the RF. </li><li><strong>C: stands for code.</strong> It is <strong>N byte(s)</strong> in length and indicates the data sent by the RF. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 33 00 xx 02 01 00 ff 00 0a d9  00  00 00  00 00 00 xx xx xx xx xx xx xx</code></p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x33</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x02</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Acknowledgement status: <ul><li>0x00: Success. </li><li>0x01: Failure. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 33 00 02 02 00 36 </code></p>
<h4 id="subtitle-42-Report%20RF%20learning" class="comp-markdown-title">Report RF learning<i class="iconfont lianjie"></i></h4>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x33</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002+N</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x03</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Learning result: <ul><li>0: success. </li><li>1: failure. </li></ul></td>
</tr>
<tr>
<td></td>
<td>N</td>
<td>Data content: <br> If learning failed, the MCU will not send this field. If learning succeeded, the MCU can send data in a custom format.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 33 xx xx 03 00 xx xx xx xx xx xx </code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x33</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x03</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Acknowledgement status: <ul><li>0x00: Success. </li><li>0x01: Failure. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 33 00 02 03 00 37</code></p>
<h3 id="title-37-(Optional)%20File%20transfer%20service" class="comp-markdown-title">(Optional) File transfer service<i class="iconfont lianjie"></i></h3>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>File transfer is not executed when MCU OTA updates are in progress. This command supports the transfer of large files and various file formats.</li>
<li>To enable the file transfer feature, check whether the firmware supports this feature.</li>
</ul>
</div></div>
<h4 id="subtitle-44-File%20download" class="comp-markdown-title">File download<i class="iconfont lianjie"></i></h4>
<p><strong>Block diagram of file download</strong></p>
   <img alt="Serial Communication Protocol" src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/1632933202b55cc7add2e.png" style="zoom: 50%;">
<ul>
<li>
<p>This diagram shows the download progress of a single file. Downloading multiple files work the same way, which repeats the process until all files are downloaded.</p>
</li>
<li>
<p>During file transfer, if the module exits the transfer process due to a time out, the whole process stops.</p>
</li>
<li>
<p>During file transfer, <strong>heartbeat interaction</strong> and DP data sending stop.</p>
</li>
</ul>
<h5 id="subtitle-45-File%20download%20notification" class="comp-markdown-title">File download notification<i class="iconfont lianjie"></i></h5>
<ul>
<li>
<p>The module sends this command to notify the MCU of a file download task. The MCU returns whether to execute the download task based on the current operation.</p>
</li>
<li>
<p>This command does not apply to download tasks for robot vacuum voice files.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x01</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>0x01: fixed to <code>0x01</code></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 37 00 02 01 01 3a</code></p>
<p>The MCU returns the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0003</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x01</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>The module returns whether to execute file download. <ul><li> 0x01: reject </li><li> 0x00: accept </li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>If the MCU returns <code>0x00</code>, this field indicates the file size in each packet. The available parameters are as follows. <ul><li>0x00: 256 bytes </li><li>0x01: 512 bytes  </li><li>0x02: 1,024 bytes </li><li> 0x03: 2,048 bytes </li><li> 0x04: 3,072 bytes </li><li> 0x05: 4,096 bytes  </li><li> 0x06: 5,120 bytes </li><li> 0x07: 10,240 bytes </li></ul>  If the MCU returns <code>0x01</code>, this field indicates the download task is rejected. For more information about reasons, see <a href="#appendix2">Appendix 2</a>.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 37 00 03 01 00 07 41</code></p>
<h5 id="subtitle-46-File%20information%20sync" class="comp-markdown-title">File information sync<i class="iconfont lianjie"></i></h5>
<ul>
<li>
<p>The module sends this command to notify the MCU of the information of the download file.</p>
</li>
<li>
<p>This command does not apply to download tasks for robot vacuum voice files.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001+N</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x02</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td><br><code>num</code>: the number of files in the download task. <br><code>name</code>: the file name. <br><code>id</code>: the serial number of the file. <br><code>len</code>: the file length. <br><code>type</code>: the file type. <br> <code>file_info</code>: the custom data of each file. <br><code>ext_info</code>: the custom data, used to extend data. <br><code>act</code>: the specific actions performed in the download task.<br></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>Field description</p>
<ul>
<li>
<p><strong>Name</strong>: the file name, which can be customized.</p>
</li>
<li>
<p><strong>Id</strong>: the file ID.</p>
</li>
<li>
<p><strong>Len</strong>: the file length.</p>
</li>
<li>
<p><strong>Type</strong>: the file type, such as TXT and JPG. For more information about file formats, see <a href="#appendix5">Appendix 5</a>.</p>
</li>
<li>
<p><strong>File_info</strong>: the custom data of each file. You can use this field to add self-defined data. The module will transfer the raw data of this field to the MCU.</p>
</li>
<li>
<p><strong>Ext_info</strong>: the custom data of the download file. You can use this field to add self-defined information for download operations. The module will transfer the raw data of this field to the MCU.</p>
</li>
<li>
<p><strong>Act</strong>: the action performed in the download task, such as print and audio play. The following table lists the definition.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Print</th>
<th>Text display</th>
<th>Audio play</th>
<th>Video play</th>
<th>Store</th>
</tr>
</thead>
<tbody>
<tr>
<td>Type value</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
<td>5</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>Note that if you do not specify a value for this field, the module <strong>will not transmit this field</strong>.</p>
<p>The MCU returns the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x02</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x00: success.</li><li>0x01: failure. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, 55 aa 03 37 00 02 02 00 3d</p>
<h5 id="subtitle-47-File%20transfer" class="comp-markdown-title">File transfer<i class="iconfont lianjie"></i></h5>
<ul>
<li>
<p>The data format of the file transfer: packet offset (unsigned short) + packet data.</p>
</li>
<li>
<p>If the MCU receives a frame with a data length equal to 5 bytes and the packet offset is equal to or greater than the file size, the packet transmission ends.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02 + 0x0004 + packet length</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x03</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>The serial number of the file in transfer. The first file is 1.  The second one is 2, and so on.</td>
</tr>
<tr>
<td></td>
<td>4</td>
<td>The packet offset.</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td>The packet content.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the serial number of the file is 1 and packet offset is 0, the module will send the following command.<br>
<code>55 aa 00 37 xx xx 03 01 00 00 00 00 00 xx xx xx xx xx </code></p>
<p>The MCU returns the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x03</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x00: success. </li><li>0x01: failure.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 37 00 02 03 00 3e</code></p>
<h5 id="subtitle-48-(Optional)%20Execution%20results" class="comp-markdown-title">(Optional) Execution results<i class="iconfont lianjie"></i></h5>
<p>The MCU can use this command to send execution status to the module.</p>
<p>This command is <strong>optional</strong>. You can implement it if your product requires execution feedback. Data of <code>act</code> is also optional, depending on your product features.</p>
<p>Data of <code>id</code> corresponds to the <code>id</code> field (serial number of the file) of the command <code>0x3702</code>.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x01+l+L+2</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x05</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>The length of <code>id</code>.</td>
</tr>
<tr>
<td></td>
<td>L</td>
<td>The ID of a file, corresponding to the data of <code>id</code> field of the command <code>0x3702</code>.</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><code>act</code>: <ul><li>0x00: Task is executed successfully. </li><li>0x01: Task is in progress. </li><li>0x02: Failed to execute the task.</li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>If <code>act</code> is <code>0x00</code>, set this field to <code>0x00</code>. <br> If <code>act</code> is <code>0x01</code>, set this field to the progress in percentage. For example, if the progress is 20%, set the field to the value <code>20</code>. <br> If <code>act</code> is <code>0x02</code>, this field indicates the error code. For more information, see <a href="#appendix2">Appendix 2</a>.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if a printer is printing a file of ID 10 and the task progress is at 20%, the MCU will send the following command.</p>
<p><code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-13" originaltext="03 37 05 05 01" callelement="+81337050501" class="dcelink">03 37 05 05 01</avayaelement></avayaelement> 0a 01 14 63</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x05</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: success. </li><li>0x01: invalid data. </li><li> 0x02: failed to report data.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 37 00 02 05 00 3d</code></p>
<h4 id="subtitle-49-File%20upload%20service" class="comp-markdown-title">File upload service<i class="iconfont lianjie"></i></h4>
<img alt="Serial Communication Protocol" src="https://airtake-public-data-1254153901.cos.ap-shanghai.myqcloud.com/content-platform/hestia/1657037672c84eae4202b.png" style="zoom: 40%;">
<h5 id="subtitle-50-Initiate%20file%20upload" class="comp-markdown-title">Initiate file upload<i class="iconfont lianjie"></i></h5>
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><p>The MCU sends this command to the module to request uploading files.</p>
</div></div>
<p><strong>The MCU sends the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length (byte)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001+N</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x06</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td><p>{</p><p>“num”:n; the number of files in the download task.</p><p>“files”[</p><p>{</p><p>“name”:“xx”, the file name.</p><p>“id”:n, the serial number of the file. </p><p> “len”:n, the file length.</p><p>“type”: n, the file type. </p><p>“file_info”:“xx”, the custom data of each file.</p><p>},</p><p>{</p><p>“name”:“xx”, the file name.</p><p>“id”:n, the serial number of the file. </p><p> “len”:n, the file length.</p><p>“type”: n, the file type. </p><p>“file_info”:“xx”, the custom data of each file.</p><p>},</p><p>…</p><p>]</p><p>“ext_info”:“xxxx”</p><p>}</p><p></p></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p><strong>The module returns the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length (byte)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x06</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><code>Ret</code>: The result of command execution.<ul><li><code>0x00</code>: Success</li><li><code>0x01</code>: Failure</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<h5 id="subtitle-51-File%20upload" class="comp-markdown-title">File upload<i class="iconfont lianjie"></i></h5>
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>Data format: packet offset (unsigned short) + payload.</li>
<li>When the module receives a frame with a data length equal to 4 bytes and the packet offset is greater than or equal to the size of the update, the transfer is completed.</li>
</ul>
</div></div>
<p><strong>The MCU sends the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length (byte)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x00020x0004 + packet length</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Sub-command: 0x07</td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>The ID of the file being transferred.</td>
</tr>
<tr>
<td></td>
<td>4</td>
<td>File offset.</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td>The packet content.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p><strong>The module sends the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length (byte)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0003</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x07</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li><code>Ret</code>: The result of operation.</li><li><code>0x00</code>: Success</li><li><code>0x01</code>: Failure</li><li><code>0x02</code>: Canceled</li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>If <code>Ret</code> is <code>0x00</code>, <code>0x00</code> is returned.</li><li>If <code>Ret</code> is <code>0x01</code>, a value from <code>0x01</code> to <code>0x0FF</code> is returned, indicating the failure reason. For more information, see <a href="#appendix3">Appendix 3</a>.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<h4 id="subtitle-52-The%20MCU%20proactively%20get%20or%20update%20file%20transfer%20status" class="comp-markdown-title">The MCU proactively get or update file transfer status<i class="iconfont lianjie"></i></h4>
<ul>
<li>If the MCU proactively interrupts the file transfer, it can use this command to notify the module of the current transfer status.</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0003</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x04</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: All transfer tasks are terminated. </li><li> 0x01: Current transfer task is terminated. When multiple tasks are in the queue, this command will terminate the current task and start the next task. </li><li>0x02: Get the transfer status. <br>…</li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00/0x01: The reason for task termination. For more information, see <a href="#appendix2">Appendix 2</a>. </li><li>Other values: Set this field to <code>0x00</code>. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 37 00 03 04 02 00 42</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0003</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x04</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x01: Terminate file transfer. </li><li>0x02: Get the current file transfer status.</li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x01: indicates execution result. </li><li>0x00: success. </li><li> 0x01: failure. </li><li>0x02: indicates the file transfer status. For more information, see <a href="#appendix3">Appendix 3</a>. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 37 00 03 04 02 00 3f</code></p>
<h4 id="subtitle-53-File%20transfer%20result" class="comp-markdown-title">File transfer result<i class="iconfont lianjie"></i></h4>
<p>The module can use this command to notify the MCU of the result of file download or upload.</p>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0004</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x08</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x01: file download. </li><li> 0x02: file upload. </li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Execution result. <ul><li>0x00: success. </li><li>0x01: failure. </li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>If the execution result is <code>0x00</code>, <code>0x00</code> will be returned.  If the execution result is <code>0x01</code>, a failure reason will be returned. For more information, see <a href="#appendix3">Appendix 3</a>.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 37 00 04 08 01 00 00 43</code></p>
<p>The MCU returns the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x37</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x08</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 37 00 01 08  42</code></p>
<h3 id="title-38-(Optional)%20Voice%20features" class="comp-markdown-title">(Optional) Voice features<i class="iconfont lianjie"></i></h3>
<p>The protocols in this section only apply to the voice module VWXR2.</p>
<h4 id="subtitle-55-(Optional)%20Get%20voice%20status" class="comp-markdown-title">(Optional) Get voice status<i class="iconfont lianjie"></i></h4>
<p>The voice module will send the voice status to the MCU. Alternatively, the MCU can proactively query the voice status.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x60</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-14" originaltext="03 60 00 00 62" callelement="+81360000062" class="dcelink">03 60 00 00 62</avayaelement></avayaelement></code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x60</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Voice status code. <ul><li>0: idle. </li><li>1: Mic is muted. </li><li>2: woken up. </li><li>3: recording voices. </li><li>4: recognizing voices. </li><li>5: voice is recognized. </li><li>6: failed to recognize voices. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 60 00 01 00 60</code></p>
<h4 id="subtitle-56-(Optional)%20Mute%20the%20mic" class="comp-markdown-title">(Optional) Mute the mic<i class="iconfont lianjie"></i></h4>
<p>The MCU can use this command to mute the mic or query the mic status.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x61</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td><ul><li>0: Turn on the mic. </li><li>1: Mute the mic. </li><li>0xA0: Query the mic status. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 61 00 01 00 64</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x61</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td><ul><li>0: Mic is on.  </li><li>1: Mic is muted. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 61 00 01 00 61</code></p>
<h4 id="subtitle-57-(Optional)%20Adjust%20the%20speaker%20volume" class="comp-markdown-title">(Optional) Adjust the speaker volume<i class="iconfont lianjie"></i></h4>
<p>The MCU can use this command to adjust the speaker volume or query the current volume.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x62</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td><ul><li>Volume: 0 to 10. </li><li>Query volume: 0xA0 </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 62 00 01 03 68</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x62</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Volume: 0 to 10.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 62 00 01 03 65</code></p>
<h4 id="subtitle-58-(Optional)%20Test%20audio%20functionality" class="comp-markdown-title">(Optional) Test audio functionality<i class="iconfont lianjie"></i></h4>
<p>Record voices and while play the recording. Use acoustic equipment to compare the input and output audio signals.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x63</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td><ul><li>0: Disable audio test. </li><li>1: Perform audio loop test on mic1. </li><li>2: Perform audio loop test on mic2. </li><li>0xA0: Query the test status. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 63 00 01 02 68</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x63</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td><ul><li>0: Disable audio test. </li><li>1: Perform audio loop test on mic1. </li><li>2: Perform audio loop test on mic2.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 63 00 01 02 65</code></p>
<h4 id="subtitle-59-(Optional)%20Test%20waking%20up%20voice%20assistant" class="comp-markdown-title">(Optional) Test waking up voice assistant<i class="iconfont lianjie"></i></h4>
<p>After the voice module enters test mode, the wake word must be delivered within 10 seconds. If the module is not woken up within 10 seconds, it returns a failure result.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x64</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0000</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td>None</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-15" originaltext="03 64 00 00 66" callelement="+81364000066" class="dcelink">03 64 00 00 66</avayaelement></avayaelement></code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x64</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>0</td>
<td><ul><li>0: failed to be woken up. </li><li>1: woken up successfully. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 64 00 01 01 65</code></p>
<h4 id="subtitle-60-Extended%20features" class="comp-markdown-title">Extended features<i class="iconfont lianjie"></i></h4>
<p>You can implement the following extended features for your voice modules.</p>
<ul>
<li>Notifications and settings of play/pause, Bluetooth on/off, local alarm, and grouped voice controls.</li>
<li>Play/pause: applies to songs, jokes, and more.</li>
<li>Bluetooth on/off: turns on or off Bluetooth of a Bluetooth speaker.</li>
<li>Local alarm: sync alarms set by the voice control to the mobile app.</li>
<li>Grouped voice controls: notifications of voice control commands. For example, play next or previous media.</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>N</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x00</td>
</tr>
<tr>
<td></td>
<td>Data: <br>{<br>“play”:true,<br>“bt_play”:true<br>,“ctrl_group”:“xxxx”}</td>
<td><ul><li> <code>play</code>: play/pause. <br> <code>true</code>: play. <code>false</code>: pause. </li><li> <code>bt_play</code>: turn on or off Bluetooth. <br> <code>true</code>: turn on Bluetooth. <code>false</code>: turn off Bluetooth.</li><li> <code>ctrl_group</code>: grouped control commands. <br> <code>next</code>: play the next media. <code>pre</code>: play the previous media. </li><li> You can only implement the play/pause and Bluetooth on/off features on the MCU. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the data is  <code>{"play":true,"bt_play":true,"ctrl_group":"next"}</code>, the MCU will send the following command.<br>
<code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-16" originaltext="03 65 00 31 00" callelement="+81365003100" class="dcelink">03 65 00 31 00</avayaelement></avayaelement> 7b 22 70 6c 61 79 22 3a 74 72 75 65 2c 22 62 74 5f 70 6c 61 79 22 3a 74 72 75 65 2c 22 63 74 72 6c 5f 67 72 6f 75 70 22 3a 22 6e 65 78 74 22 7d c7</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x00</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: success. </li><li>0x01: failure. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 02 00 00 66</code></p>
<h5 id="subtitle-61-Status%20notification" class="comp-markdown-title">Status notification<i class="iconfont lianjie"></i></h5>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>1+N</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x01</td>
</tr>
<tr>
<td></td>
<td>Data: {<br>“play”:true,<br>“bt_play”:true," alarm":“xxxx”,“ctrl_group”:“xxxx”}</td>
<td><ul><li> <code>play</code>: play/pause. <code>true</code>: play. <code>false</code>: pause.  </li><li> <code>bt_play</code>: turn on or off Bluetooth. <code>true</code>: turn on Bluetooth. <code>false</code>: turn off Bluetooth.  </li><li> <code>alarm</code>: local alarm. <code>xxx</code> is a string.  </li><li> <code>ctrl_group</code>: grouped voice commands. <code>xxx</code> is a string.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the data is <code>{"play":true,"bt_play":true,"ctrl_group":"next","alarm":"xxx"}</code>, the module sends the following command.<br>
<code>55 aa 00 65 00 3f 01 7b 22 70 6c 61 79 22 3a 74 72 75 65 2c 22 62 74 5f 70 6c 61 79 22 3a 74 72 75 65 2c 22 63 74 72 6c 5f 67 72 6f 75 70 22 3a 22 6e 65 78 74 22 2c 22 61 6c 61 72 6d 22 3a <avayaelement class="contentWrapper"><avayaelement id="dceLink-17" originaltext="22 78 78 78 22" callelement="+812278787822" class="dcelink">22 78 78 78 22</avayaelement></avayaelement> 7d 36</code></p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>2</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x01</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x00: success. </li><li> 0x01: failure. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 65 00 02 01 00 6a</code></p>
<h5 id="subtitle-62-Wake%20up%20the%20module" class="comp-markdown-title">Wake up the module<i class="iconfont lianjie"></i></h5>
<ul>
<li>
<p>The MCU can send this command to wake up the module.</p>
</li>
<li>
<p>This command only applies to modules that run on Linux and are interfaced using the general protocols.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x01</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x02</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-18" originaltext="03 65 00 01 02" callelement="+81365000102" class="dcelink">03 65 00 01 02</avayaelement></avayaelement> 6a</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x02</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x00: success.  </li><li> 0x01: failure. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 02 02 00 68</code></p>
<h5 id="subtitle-63-Notification%20of%20turning%20on%2Foff%20automatic%20speech%20recognition%20(ASR)" class="comp-markdown-title">Notification of turning on/off automatic speech recognition (ASR)<i class="iconfont lianjie"></i></h5>
<p>After this feature is enabled, ASR processed texts will be transmitted through the command <code>0x6504</code>.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x03</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x00: turn off ASR. </li><li> 0x01: turn on ASR.  </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 65 00 02 03 00 6c</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x03</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x00: success.  </li><li> 0x01: failure.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 02 03 00 69</code></p>
<h5 id="subtitle-64-Notification%20of%20ASR%20processing" class="comp-markdown-title">Notification of ASR processing<i class="iconfont lianjie"></i></h5>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0xXX</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x04</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> <code>text</code>: content in UTF-8 </li><li> <code>speaker</code> </li><li> <code>id</code></li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the data is <code>{"text":"xx","speaker":"human", "id":1171}</code>, the module will send the following command.<br>
<code>55 aa 03 65 00 2b 04 7b 22 74 65 78 74 22 3a 22 78 78 22 2c <avayaelement class="contentWrapper"><avayaelement id="dceLink-19" originaltext="22 73 70 65 61" callelement="+812273706561" class="dcelink">22 73 70 65 61</avayaelement></avayaelement>6b 65 72 22 3a 22 68 75 6d 61 6e 22 2c <avayaelement class="contentWrapper"><avayaelement id="dceLink-33" originaltext="20 22 69 64 22" callelement="+812022696422" class="dcelink">20 22 69 64 22</avayaelement></avayaelement> 3a 31 31 37 31 7d 69</code></p>
<p>The MCU returns the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x01</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x04</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 01 04 69</code></p>
<h5 id="subtitle-65-Query%20the%20current%20playing%20media" class="comp-markdown-title">Query the current playing media<i class="iconfont lianjie"></i></h5>
<ul>
<li>The MCU can use this command to query the current playing media.</li>
<li>The returned content is represented in UTF-8 format and transmitted in hex.</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x01</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x05</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-20" originaltext="03 65 00 01 05" callelement="+81365000105" class="dcelink">03 65 00 01 05</avayaelement></avayaelement> 6d</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002+N</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x05</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Data[0]: <ul><li> 0x00: success. </li><li>0x01: failure.</li></ul></td>
</tr>
<tr>
<td></td>
<td>N</td>
<td>If the result is <code>0x01</code>, this part is empty. <br> If the result is <code>0x00</code>, the data is <code>artist</code> and <code>trackTitle</code>.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the data is <code>{"artist":"Beethoven", "trackTitle":"Serenade in D major, Op.8"}</code>, the module sends the following command.<br>
<code>55 aa 00 65 00 34 05 00 7b 22 61 72 74 69 73 74 22 3a 22 e8 96 9b e4 b9 8b e8 b0 a6 22 2c <avayaelement class="contentWrapper"><avayaelement id="dceLink-21" originaltext="22 74 72 61 63" callelement="+812274726163" class="dcelink">22 74 72 61 63</avayaelement></avayaelement> 6b 54 69 74 6c 65 22 3a 22 e5 8a a8 e7 89 a9 e4 b8 96 e7 95 8c 22 7d dc</code></p>
<h5 id="subtitle-66-Report%20status%20to%20the%20module" class="comp-markdown-title">Report status to the module<i class="iconfont lianjie"></i></h5>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x06</td>
</tr>
<tr>
<td></td>
<td></td>
<td><ul><li> 0x00: online. </li><li> 0x01: Bluetooth connected. </li><li> 0x02: in-call </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 65 00 02 06 00 6f</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x06</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: success. </li><li>0x01: failure. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 02 06 00 6c</code></p>
<h5 id="subtitle-67-Report%20recording%20(auto)" class="comp-markdown-title">Report recording (auto)<i class="iconfont lianjie"></i></h5>
<p>The MCU can send this command to trigger voice recording. The module will pick up voices and automatically end the recording. The recording can be up to 10 seconds long in one go.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Sub-command: 0x07</td>
</tr>
<tr>
<td></td>
<td></td>
<td>0x01: start recording.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 65 00 02 07 01 71</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Sub-command: 0x07</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: success. </li><li>0x01: failure. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 02 07 00 6d</code></p>
<h5 id="subtitle-68-Report%20recording%20(manual)" class="comp-markdown-title">Report recording (manual)<i class="iconfont lianjie"></i></h5>
<p>The MCU can send this command to trigger voice recording but the recording must be ended manually. The recording can be up to 10 seconds long in one go.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x08</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: recording stopped. </li><li>0x01: recording started. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 65 00 02 08 00 71</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x08</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: success.  </li><li>0x01: failure.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 02 08 00 6e</code></p>
<h5 id="subtitle-69-Turn%20on%2Foff%20alarms" class="comp-markdown-title">Turn on/off alarms<i class="iconfont lianjie"></i></h5>
<p>After this feature is enabled, alarm data will be transmitted through the command <code>0x650A</code>.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x09</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: disabled. </li><li> 0x01: enabled. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 65 00 02 09 01 73</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x09</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x00: success.</li><li> 0x01: failure. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 02 09 00 6f</code></p>
<h5 id="subtitle-70-Send%20alarms" class="comp-markdown-title">Send alarms<i class="iconfont lianjie"></i></h5>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0xXX</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0A</td>
</tr>
<tr>
<td></td>
<td></td>
<td>Data[0]: the number of alarms. <br>Data[1]: the operation type. <code>0</code>: poll.  <code>1</code>: add. <code>2</code>: delete. <code>3</code>: update. <p> <br> The following is the repeated content.  <br>Data[2] to Data[7]: the alarm ID.   <br>Data[8]: the year. <br>Data[9]: the month. <br>Data[10]: the day.  <br>Data[11]: the hour.  <br>Data[12]: the minute. <br>Data[13]: the schedule rule. </p><p> </p><ul><li> <code>bit7</code> to <code>bit1</code> represent Sunday through Saturday. <br> If a bit is <code>1</code>, it means an alarm is scheduled to repeat on that day. <br> <code>0000000</code> indicates a one-time alarm. <code>bit0</code> represents alarm status. <code>0</code>: enabled. <code>1</code>: dismissed. <br> For example, <code>0111000</code> indicates an alarm is repeated every Monday, Tuesday, and Wednesday. </li></ul> Data[14]: alarm ringtone. <code>0</code>: online ringtone. Other values: local ringtone.  <br>Data[15] to Data[35]: a ringtone description, used to match a song.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if a one-time alarm with ID 1 is scheduled to go off at 17:32 on August 23, 2021, the module will send the following command.</p>
<p><code>55 aa 00 65 00 24  0a 01 01 00 00 00 00 00 01 15 08 17 11 20  00  00  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 fa</code></p>
<p>The MCU returns the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x01</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0A</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 65 00 01 0a 72</code></p>
<h5 id="subtitle-71-Query%20alarm%20list" class="comp-markdown-title">Query alarm list<i class="iconfont lianjie"></i></h5>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x01</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0B</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 65 00 01 0b 73</code></p>
<p>The module returns an alarm list through the command <code>0x650A</code>.</p>
<h5 id="subtitle-72-Turn%20on%2Foff%20local%20alarms" class="comp-markdown-title">Turn on/off local alarms<i class="iconfont lianjie"></i></h5>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0C</td>
</tr>
<tr>
<td></td>
<td></td>
<td><ul><li>0x00: Turn off a local alarm.</li><li> 0x01: Turn on a local alarm.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 65 00 02 0c 00 75</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0C</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: success.</li><li> 0x01: failure.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 02 0c 00 72</code></p>
<h5 id="subtitle-73-Manage%20alarms" class="comp-markdown-title">Manage alarms<i class="iconfont lianjie"></i></h5>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0xXX</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0D</td>
</tr>
<tr>
<td></td>
<td></td>
<td><ul><li>0x01: Set an alarm. </li><li> 0x02: Edit an alarm. </li><li>0x03: Delete an alarm. </li><li> 0x04: Turn on an alarm.</li><li> 0x05: Turn off an alarm. </li></ul></td>
</tr>
<tr>
<td></td>
<td></td>
<td>Data is in JSON format.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the data is <code>{"date":"20210326","time":"17:05","loops":"0000000","timeZone":"+08:00","bell":0}</code>, the MCU will send the following command.</p>
<p><code>55 aa 03 65 00 53 0d 01 7b 22 64 61 74 65 22 3a 22 32 30 32 31 30 33 32 36 22 2c 22 74 69 6d 65 22 3a 22 31 37 3a 30 35 22 2c 22 6c 6f 6f 70 73 22 3a 22 30 30 30 30 30 30 30 22 2c 22 74 69 6d 65 5a 6f 6e 65 22 3a 22 2b 30 38 3a 30 30 22 2c 22 62 65 6c 6c 22 3a 30 7d 9e </code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x09</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0D</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x01: Set an alarm. </li><li>0x02: Edit an alarm. </li><li>0x03: Delete an alarm. </li><li>0x04: Turn on an alarm. </li><li>0x05: Turn off an alarm.</li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: Operation succeeded. </li><li>0x01: JSON format error occurs. </li><li>0x02: Parameter is missing. </li><li>0x03: Failed to call service. </li><li>0x04: Other errors. </li></ul></td>
</tr>
<tr>
<td></td>
<td>6</td>
<td><code>timerId</code> of an operation.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 09 0d 01 00  00 00 00 00 00 0a 85 </code></p>
<p><strong>Manage alarms in JSON format</strong></p>
<p><strong>Set an alarm</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td>time</td>
<td>String</td>
<td>Set a time for an alarm, such as 08:30.</td>
<td>N</td>
</tr>
<tr>
<td>loops</td>
<td>String</td>
<td>Repeat an alarm. Sunday through Saturday, specify the day or days of the week when the alarm should recur. <code>1</code> means an alarm recurs on that day every week. For example, <code>0100001</code> represents an alarm that should go off on Monday and Saturday every week.</td>
<td>N</td>
</tr>
<tr>
<td>date</td>
<td>String</td>
<td>Set a date for an alarm. For a recurring alarm, this field defaults to <code>00000000</code>. To schedule a one-time alarm, specify a date when an alarm should go off, such as <code>20181126</code>.</td>
<td>N</td>
</tr>
<tr>
<td>timeZone</td>
<td>String</td>
<td>The timezone, such as <code>+08:00</code>.</td>
<td>N</td>
</tr>
<tr>
<td>bell</td>
<td>Integer</td>
<td>The alarm ringtone, represented by a positive integer and defaulting to <code>1</code>. <code>0</code>: online ringtone. Other values: local ringtone.</td>
<td>Y</td>
</tr>
<tr>
<td>bellDesc</td>
<td>String</td>
<td>The ringtone description, used to match a song.</td>
<td>Y</td>
</tr>
</tbody>
</table>
<ul>
<li>One-time alarm: <code>{ "date": "20181126", "time": "20:30", "loops": "0000000", "timeZone": "+08:00", "bell":1 }</code></li>
<li>Recurring alarm: <code>{ "date": "00000000", "time": "08:00", "loops": "0111110", "timeZone": "+08:00", "bell":1 }</code></li>
</ul>
<p><strong>Edit an alarm</strong></p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td>time</td>
<td>String</td>
<td>Set a time for an alarm, such as 08:30.</td>
<td>N</td>
</tr>
<tr>
<td>loops</td>
<td>String</td>
<td>Repeat an alarm. Sunday through Saturday, specify the day or days of the week when the alarm should recur. <code>1</code> means an alarm recurs on that day every week. For example, <code>0100001</code> represents an alarm that should go off on Monday and Saturday every week.</td>
<td>N</td>
</tr>
<tr>
<td>date</td>
<td>String</td>
<td>Set a date for an alarm. For a recurring alarm, this field defaults to <code>00000000</code>. To schedule a one-time alarm, specify a date when an alarm should go off, such as <code>20181126</code>.</td>
<td>N</td>
</tr>
<tr>
<td>timerId</td>
<td>Long</td>
<td>Alarm ID</td>
<td>N</td>
</tr>
<tr>
<td>timeZone</td>
<td>String</td>
<td>The timezone, such as <code>+08:00</code>.</td>
<td>N</td>
</tr>
<tr>
<td>bell</td>
<td>Integer</td>
<td>The alarm ringtone, represented by a positive integer and defaulting to <code>1</code>. <code>0</code>: online ringtone. Other values: local ringtone.</td>
<td>Y</td>
</tr>
<tr>
<td>bellDesc</td>
<td>String</td>
<td>The ringtone description, used to match a song.</td>
<td>Y</td>
</tr>
</tbody>
</table>
<ul>
<li>One-time alarm: <code>{ "timerId": 10164075, "date": "20210322", "time": "14:30", "loops": "0000000", "timeZone": "+08:00", "bell":1 }</code></li>
<li>Recurring alarm: <code>{ "timerId": 10164075, "date": "20210322", "time": "14:30", "loops": "0111110", "timeZone": "+08:00", "bell":1 }</code></li>
</ul>
<p><strong>Delete an alarm</strong></p>
<p>Request parameters</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td>timerId</td>
<td>Long</td>
<td>Alarm ID</td>
<td>N</td>
</tr>
</tbody>
</table>
<p><strong>Sample request</strong></p>
<p>{“timerId”: 1002}</p>
<p><strong>Dismiss an alarm</strong></p>
<p>Request parameters</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td>timerId</td>
<td>Long</td>
<td>Alarm ID</td>
<td>N</td>
</tr>
</tbody>
</table>
<p><strong>Sample request</strong></p>
<p>{“timerId”: 1002}</p>
<p><strong>Enable an alarm</strong></p>
<p>Request parameters</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
<th>Optional</th>
</tr>
</thead>
<tbody>
<tr>
<td>timerId</td>
<td>Long</td>
<td>Alarm ID</td>
<td>N</td>
</tr>
</tbody>
</table>
<p><strong>Sample request</strong></p>
<p>{“timerId”: 1002}</p>
<h5 id="subtitle-74-Query%20the%20number%20of%20reminders" class="comp-markdown-title">Query the number of reminders<i class="iconfont lianjie"></i></h5>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x01</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0E</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 65 00 01 0e  76</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0E</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>The number of reminders: 0 to 30.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 02 0e 02 76</code></p>
<h5 id="subtitle-75-Send%20alarm%20data" class="comp-markdown-title">Send alarm data<i class="iconfont lianjie"></i></h5>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001+N</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0F</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td><code>text</code>: The texts or text commands stored on the device. <br><code>type</code>:  <ul><li> <code>tts</code> indicates the text the speaker reads out. </li></ul> <ul><li><code>music</code> indicates the custom ringtone to be set. </li></ul> <ul><li><code>target</code>: <code>alert</code> indicates a reminder. <code>clock</code> indicates an alarm.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the data is <code>{"text":"Play Beethoven","type":"music","target":"alert"}</code>, the MCU will send the following command.</p>
<p><code>55 aa 03 65 00 41 0f 7b 22 74 65 78 74 22 3a 22 e6 92 ad e6 94 be e6 9e 97 e4 bf 8a e6 9d b0 e7 9a 84 e6 ad 8c 22 2c 22 74 79 70 65 22 3a 22 6d <avayaelement class="contentWrapper"><avayaelement id="dceLink-22" originaltext="75 73 69 63 22" callelement="+817573696322" class="dcelink">75 73 69 63 22</avayaelement></avayaelement> 2c 22 74 61 73 67 65 74 22 3a 22 61 6c 65 72 74 22 7d 91</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x65</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x0F</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: Operation succeeded. </li><li>0x01: JSON format error occurs. </li><li>0x02: Parameter is missing. </li><li>0x03: Other errors. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 65 00 02 0f 00 75</code></p>
<h3 id="title-39-Extended%20services" class="comp-markdown-title">Extended services<i class="iconfont lianjie"></i></h3>
<p><a id="TimeNoty"></a></p>
<h4 id="subtitle-77-Enable%20time%20service%20notification" class="comp-markdown-title">Enable time service notification<i class="iconfont lianjie"></i></h4>
<ul>
<li>
<p>This feature enables the module to notify the MCU of whether it has synced time with the server after startup.</p>
</li>
<li>
<p>The MCU sends a command to enable the required time service. The module syncs time with the server after startup and then returns the time data the MCU requests.</p>
</li>
<li>
<p>If the time service has already been enabled,   the module will reject the repeated enablement request unless it is restarted. In this case, the MCU should use the common command of getting time data.</p>
</li>
<li>
<p>When you use <a href="#QueryServerTime">Get system time in GMT</a> and <a href="#QueryLocalTime">Get local time</a>, the module will not immediately sync time with the server after it is connected to the server. However, during this period, the MCU still keeps requesting time data. This notification feature allows the MCU to wait for the message from the module without keeping asking.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x01 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: GMT. </li><li>0x01: local time. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 34 00 02 01 01 3a</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x01 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: The service is enabled.  </li><li> 0x01: Failed to enable the service. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 34 00 02 01 00 36</code></p>
<h4 id="subtitle-78-Time%20service%20notification" class="comp-markdown-title">Time service notification<i class="iconfont lianjie"></i></h4>
<ul>
<li>
<p>The module sends the time data according to the time service the MCU requests.</p>
</li>
<li>
<p>After the module is restarted, the time service is disabled. The MCU must send the command to enable the time service notification.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0009</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x02 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><li>0x00: GMT. </li><li>0x01: local time.</li></td>
</tr>
<tr>
<td></td>
<td>7</td>
<td>The data length is 7 bytes. <ul><li>Data[0]: indicates the year. <code>0x00</code> represents the year 2000. </li><li>Data[1]: indicates the month, ranging from 1 to 12. </li><li>Data[2]: indicates the day, ranging from 1 to 31. </li><li>Data[3]: indicates the hour, ranging from 0 to 23. </li><li>Data[4]: indicates the minute, ranging from 0 to 59. </li><li>Data[5]: indicates the second, ranging from 0 to 59. </li><li>Data[6]: indicates the week, ranging from 1 to 7. <code>1</code> indicates Monday. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the local time is Monday at 18:35:28 on August 23, 2021, the module sends the following command.<br>
<code>55 aa 00 34 00 09 02 01 15 08 17 12 23 1c 01 c5</code></p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x02 (sub-command)</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 34 00 01 02 39</code></p>
<h4 id="subtitle-79-(Optional)%20Enable%20reset%20status%20notification" class="comp-markdown-title">(Optional) Enable reset status notification<i class="iconfont lianjie"></i></h4>
<p>A device can be reset with operations on the hardware or the mobile app. However, the MCU will not be notified of related status. This feature will enable the module to proactively send its status to the MCU.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x04 (sub-command)</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-23" originaltext="03 34 00 01 04" callelement="+81334000104" class="dcelink">03 34 00 01 04</avayaelement></avayaelement> 3b</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x04 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><li> 0x00: success.  </li><li>0x01: failure.</li></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 34 00 02 04 00 39</code></p>
<h4 id="subtitle-80-(Optional)%20The%20reset%20status" class="comp-markdown-title">(Optional) The reset status<i class="iconfont lianjie"></i></h4>
<table>
<thead>
<tr>
<th>Reset status</th>
<th>Description</th>
<th>Status value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Status 1</td>
<td>Reset by hardware operation</td>
<td>0x00</td>
</tr>
<tr>
<td>Status 2</td>
<td>Reset performed on the mobile app</td>
<td>0x01</td>
</tr>
<tr>
<td>Status 3</td>
<td>Factory reset performed on the mobile app</td>
<td>0x02</td>
</tr>
</tbody>
</table>
<p>The module will resend the packet two times at a one second interval if it receives no response.</p>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x05 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><li>0x00: reset by hardware operation. </li><li>0x01: reset performed on the mobile app. </li><li>0x02: factory reset performed on the mobile app.</li></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 34 00 02 05 00 3a</code></p>
<p><strong>The MCU returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x05 (sub-command)</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-24" originaltext="03 34 00 01 05" callelement="+81334000105" class="dcelink">03 34 00 01 05</avayaelement></avayaelement> 3c</code></p>
<h4 id="subtitle-81-Get%20information%20about%20Wi-Fi%20module" class="comp-markdown-title">Get information about Wi-Fi module<i class="iconfont lianjie"></i></h4>
<ul>
<li>
<p>The running data of the Wi-Fi module is required for some products. This field is used to get the required information.</p>
</li>
<li>
<p>The MCU can send a specified code to the module to get the required information. If the MCU requires multiple types of information, the codes must be sent in order.</p>
</li>
<li>
<p>If the MCU requires all the information available, it can use the code <code>0xff</code>.</p>
</li>
<li>
<p>This command only supports getting the SSID of an AP.</p>
</li>
<li>
<p>If the SSID of an AP is the default <code>smartlife</code>, this command only returns <code>smartlife</code>. The actual SSID is <code>smartlife_xxxx</code>. <code>xxxx</code> represents the last four digits of the MAC address.</p>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>The data format of this field is in JSON string and the data length varies depending on the information type.</li>
<li>The length of data that the MCU sends to the module must be at least 2 bytes, namely the sub-command plus a 1-byte data code. If the data length is incorrect, the module will return a failure.</li>
<li>The data codes have a one-to-one relationship with the information types. Make sure you use the correct data code and do not use the reserved code.</li>
</ul>
</div></div>
</li>
</ul>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Encoding</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>All the information available</td>
<td>0xff</td>
</tr>
<tr>
<td>SSID of an AP</td>
<td>0x01</td>
</tr>
<tr>
<td>Country code</td>
<td>0x02</td>
</tr>
<tr>
<td>Serial number (SN) of the module</td>
<td>0x03</td>
</tr>
<tr>
<td>Frustration-Free Setup (FFS) authorization history</td>
<td>0x04</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>For more information about the returned fields, see <a href="#appendix4">Appendix 4</a>.</p>
<div styled-block="" data-style-warn=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>The common Wi-Fi modules do not support getting their SNs.</li>
<li>If a module does not have FFS authorization history, the <code>ffs</code> field will return <code>0</code>.</li>
<li>If a module has FFS authorization history, the <code>ffs</code> field will return <code>1</code>, coupled with the SN value to assist in verification.</li>
</ul>
</div></div>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x01+0x01+…N</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Sub-command: 0x07</td>
</tr>
<tr>
<td></td>
<td>Data(1)</td>
<td><ul><li> 0x01: the SSID of an AP. </li><li>0x02: the country code. <br>0x03: the SN of the module. </li><li>0xFF: all the information available. This code is valid only when it is set as the first byte and enjoys the highest priority. When the module receives this code, it will return all the information available. </li></ul></td>
</tr>
<tr>
<td></td>
<td>Data(2)</td>
<td><ul><li> 0x01: the SSID of an AP. </li><li>0x02: the country code. </li><li>0x03: the SN of the module.</li></ul></td>
</tr>
<tr>
<td></td>
<td>Data(N)</td>
<td><ul><li> 0x01: the SSID of an AP. </li><li> 0x02: the country code. 0x03: the SN of the module. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 34 00 02 07 01 40</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x34</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02+N</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x07 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>  0x00: success. </li><li> 0x01: failure. No subsequent data will be returned. </li></ul></td>
</tr>
<tr>
<td></td>
<td>Data (N)</td>
<td><ul><li> <code>ap</code> </li><li> <code>cc</code></li><li><code>sn</code></li><li><code>ffs</code> </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, if the data is <code>{"ap":"PlusStyle"}</code>, the module returns the following command.<br>
<code>55 aa 00 34 00 14 07 00 7b 22 61 70 22 3a 22 50 6c <avayaelement class="contentWrapper"><avayaelement id="dceLink-25" originaltext="75 73 53 74 79" callelement="+817573537479" class="dcelink">75 73 53 74 79</avayaelement></avayaelement> 6c 65 22 7d 8e</code></p>
<h3 id="title-40-(Optional)%20Bluetooth%20features" class="comp-markdown-title">(Optional) Bluetooth features<i class="iconfont lianjie"></i></h3>
<h4 id="subtitle-83-Bluetooth%20functional%20test" class="comp-markdown-title">Bluetooth functional test<i class="iconfont lianjie"></i></h4>
<ul>
<li>
<p>The module scans for the designated Bluetooth beacon <code>ty_mdev</code> and returns the result and signal strength in percentage.</p>
</li>
<li>
<p>To prevent quality defects, it is recommended that the distance between the router and the device under test should be about 5 meters. If the signal strength is greater than or equal to 60%, the device is acceptable. The specific testing conditions depend on your production line and environment.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x35</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x01 (sub-command)</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 35 00 01 01 39</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x35</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0003</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x01 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>2</td>
<td>The data length is 2 bytes. <br>Data[0]: <code>0x00</code> indicates failure, and <code>0x01</code> indicates success. <ul><li>When Data[0] is <code>0x01</code>, Data[1] indicates the signal strength, ranging from 0 to 100, 0 for the weakest and 100 for the strongest. </li><li>When Data[0] is <code>0x00</code>, if Data[1] is <code>0x00</code>, it indicates the module does not find the designated Bluetooth beacon. If Data[1] is <code>0x01</code>, it indicates the module is not flashed with the license.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 35 00 03 01 01 14 4d</code></p>
<p><a id="BleStatus"></a></p>
<h4 id="subtitle-84-Report%20Bluetooth%20connection%20status" class="comp-markdown-title">Report Bluetooth connection status<i class="iconfont lianjie"></i></h4>
<table>
<thead>
<tr>
<th style="text-align:center">Bluetooth connection status</th>
<th style="text-align:center">Description</th>
<th style="text-align:center">Status value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Status 1</td>
<td style="text-align:center">Unbound and not connected</td>
<td style="text-align:center">0x00</td>
</tr>
<tr>
<td style="text-align:center">Status 2</td>
<td style="text-align:center">Unbound and connected</td>
<td style="text-align:center">0x01</td>
</tr>
<tr>
<td style="text-align:center">Status 3</td>
<td style="text-align:center">Bound and not connected</td>
<td style="text-align:center">0x02</td>
</tr>
<tr>
<td style="text-align:center">Status 4</td>
<td style="text-align:center">Bound and connected</td>
<td style="text-align:center">0x03</td>
</tr>
<tr>
<td style="text-align:center">Status 5</td>
<td style="text-align:center">Unknown status</td>
<td style="text-align:center">0x04</td>
</tr>
</tbody>
</table>
<ul>
<li>The module enters status 1 and status 2 when pairing over Bluetooth.</li>
<li>The LED activity in the module self-processing mode.
<ul>
<li>Status 1: Blink quickly.</li>
<li>Status 2 or Status 3: Steady off.</li>
<li>Status 4: Steady on.</li>
<li>Status 5: Blink slowly.</li>
</ul>
</li>
</ul>
<p>When the module detects that the MCU is restarted or reconnected, it will proactively send the current Bluetooth connection status to the MCU.</p>
<ul>
<li>When the Bluetooth connection status changes, the module will proactively send the current status to the MCU.</li>
<li>If you choose the <strong>module self-processing mode</strong>, implementing this protocol for your MCU is not necessary.</li>
</ul>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><p>To enable reporting Bluetooth connection status, the MCU should enable <strong>Bit 0</strong> in <code>abv</code> field when it sends <code>0x3700</code> command to the module after power on.</p>
</div></div>
<p>The Bluetooth connection when power on defaults to unknown status.</p>
<p><strong>The module sends the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length (byte)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x35</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>Subcommand</td>
<td>0x04</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>Indicate the work status of Bluetooth.<ul><li><code>0x00</code>: Status 1</li><li><code>0x01</code>: Status 2</li><li><code>0x02</code>: Status 3</li><li><code>0x03</code>: Status 4</li><li><code>0x04</code>: Status 5</li><li><code>0x05</code>: Status 6</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>: <code>55 aa 00 35 00 02 04 03 3d</code></p>
<p><strong>The MCU returns the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length (byte)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x35</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>Subcommand</td>
<td>0x04</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>: <code>55 aa 00 35 00 01 04  39</code></p>
<h4 id="subtitle-85-Request%20Bluetooth%20connection%20status" class="comp-markdown-title">Request Bluetooth connection status<i class="iconfont lianjie"></i></h4>
<table>
<thead>
<tr>
<th style="text-align:center">Bluetooth connection status</th>
<th style="text-align:center">Description</th>
<th style="text-align:center">Status value</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Status 1</td>
<td style="text-align:center">Unbound and not connected</td>
<td style="text-align:center">0x00</td>
</tr>
<tr>
<td style="text-align:center">Status 2</td>
<td style="text-align:center">Unbound and connected</td>
<td style="text-align:center">0x01</td>
</tr>
<tr>
<td style="text-align:center">Status 3</td>
<td style="text-align:center">Bound and not connected</td>
<td style="text-align:center">0x02</td>
</tr>
<tr>
<td style="text-align:center">Status 4</td>
<td style="text-align:center">Bound and connected</td>
<td style="text-align:center">0x03</td>
</tr>
<tr>
<td style="text-align:center">Status 5</td>
<td style="text-align:center">Unknown status</td>
<td style="text-align:center">0x04</td>
</tr>
</tbody>
</table>
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><p>The status definition must be consistent with that defined in <strong>Report Bluetooth connection status</strong>.</p>
</div></div>
<p><strong>The MCU sends the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length (byte)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x35</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0001</td>
</tr>
<tr>
<td>Data</td>
<td>Data</td>
<td>05</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>: <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-26" originaltext="03 35 00 01 05" callelement="+81335000105" class="dcelink">03 35 00 01 05</avayaelement></avayaelement> 3D</code></p>
<p><strong>The module returns the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length (byte)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x35</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>Subcommand</td>
<td>0x05</td>
</tr>
<tr>
<td></td>
<td>Data</td>
<td>Indicate the work status of Bluetooth.<ul><li><code>0x00</code>: Status 1</li><li><code>0x01</code>: Status 2</li><li><code>0x02</code>: Status 3</li><li><code>0x03</code>: Status 4</li><li><code>0x04</code>: Status 5</li><li><code>0x05</code>: Status 6</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>: <code>55 aa 03 35 00 02 05  00 3E</code></p>
<h4 id="subtitle-86-Data%20notification%20for%20Bluetooth%2FBeacon%20remote%20control" class="comp-markdown-title">Data notification for Bluetooth/Beacon remote control<i class="iconfont lianjie"></i></h4>
<div styled-block="" data-style-info=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><ul>
<li>Bluetooth remote control service must be enabled to use this feature.</li>
<li>The module enters pairing mode after the <code>0x02</code> command interaction. The pairing mode is only active for 30 seconds.</li>
<li>Up to five devices can be paired with the Bluetooth remote control. Otherwise, pairing will fail.</li>
</ul>
</div></div>
<p><strong>The module sends the following data.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length (byte)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x35</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0007</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x06</td>
</tr>
<tr>
<td></td>
<td>N</td>
<td><ul><li>Data[0]: The category ID (1 byte).</li><li>Data[1]: The control command (1 byte).</li><li>Data[2] to Data[5]: The command data (4 bytes)</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>: <code>55 aa 03 35 00 02 05  00 3E</code></p>
<p><strong>The MCU returns the following data.</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">Field</th>
<th style="text-align:left">Length</th>
<th style="text-align:left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Header</td>
<td style="text-align:left">2</td>
<td style="text-align:left">0x55aa</td>
</tr>
<tr>
<td style="text-align:left">Version</td>
<td style="text-align:left">1</td>
<td style="text-align:left">0x03</td>
</tr>
<tr>
<td style="text-align:left">Command</td>
<td style="text-align:left">1</td>
<td style="text-align:left">0x35</td>
</tr>
<tr>
<td style="text-align:left">Data length</td>
<td style="text-align:left">2</td>
<td style="text-align:left">0x0001</td>
</tr>
<tr>
<td style="text-align:left">Data</td>
<td style="text-align:left">1</td>
<td style="text-align:left">0x06 (subcommand)</td>
</tr>
<tr>
<td style="text-align:left">Checksum</td>
<td style="text-align:left">1</td>
<td style="text-align:left">Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p><strong>Example</strong>: <code>55 aa 03 35 00 02 05  00 3E</code></p>
<p><strong>Control commands</strong></p>
<table class="tg">
<thead>
<tr>
    <th class="tg-0lax"><br>Command<br><br> (1 byte)</th>
    <th class="tg-0lax" rowspan="2"><br>Generic command<br><br> (1 byte)</th>
    <th class="tg-0lax" colspan="2" rowspan="2"><br>Command data (4 bytes) Padded with 0 if needed</th>
  </tr>
  <tr>
    <th class="tg-0lax"><br>Category ID</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td class="tg-0lax" rowspan="34"><br>   Generic: 0xFF<br>   <br> <br>   <br>Individual category <br>   <br>Lighting product: 0x01<br>   <br>Socket/power strip: 0x02<br>   <br>Curtain switch: 0x03<br>   <br>Drying rack: 0x04<br>   <br>Fan: 0x05<br>   <br>Bathroom heater: 0x06<br>   <br>Air conditioner: 0x07<br>   <br>Garage door opener: 0x08<br>   <br>Water valve: 0x09<br>   <br>Disinfector: 0x0A<br>   <br> Thermostat plug: 0x0B<br>   <br>Dimmer switch: 0x0C<br>   <br>Scene socket: 0x0D<br>   <br>Switch: 0x0E<br>   <br>Smart curtain switch module: 0x0F   </td>
    <td class="tg-0lax"><br>Send key values: 0x01</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: Button behavior (0 – Single press. 1 – Double press. 2 – Long press. 3 – Press and hold. 4 – Press and release) <br><br>Byte 2: The key value.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Switch: 0x04</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Turn off. 1 – Turn on. 2 – Pause. <br><br>Byte 2: The number of gangs. 0 represents the main control.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Add favorites: 0x05</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 1 – Favorite a state. 2 – Go to a specified favorite. <br><br>Byte 2: The ID of a favorite, ranging from 0 to 3.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Countdown timer: 0x06</td>
    <td class="tg-0lax" colspan="2"><br>Bytes 1 to 2: The countdown time, in seconds and big-endian format. 0 indicates canceling the countdown timer. <br><br>Byte 3: The action to run when the countdown timer is done. (Reserved byte)</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>One-click group query: 0x07</td>
    <td class="tg-0lax" colspan="2"><br>The sub-device advertises the information about the added group.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Light on/off: 0x08</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Turn off. 1 – Turn on. <br><br>Byte 2: 0 – The main switch. 1 – White light switch. 2 – Colored light switch.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Brightness adjustment: 0x09</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Brightness value. 1 – Brightness up. 2 – Brightness down. <br><br>Byte 2: 0 – Brightness of the current mode. 1 – Brightness of white light. <br><br>Byte 3: When Byte 1 is 0, this byte indicates brightness percentage (1 to 100%). When Byte 1 is 1 or 2, this byte indicates the step value of brightness (1 to 100%).</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Stepless brightness adjustment: 0x0A</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Start incrementing. 1 – Start decrementing. 2 – Stop adjustment. <br><br>Byte 2: 0 – Brightness of the current mode. 1 – Brightness of white light. <br><br>Byte 3: Rate (adjustment percentage per second) <br><br>Byte 4: The target value.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Color temperature adjustment: 0x0B</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Color temperature value. 1 – Color temperature up. 2 – Color temperature down. <br><br>Byte 2: When Byte 1 is 0, this byte indicates color temperature percentage (1 to 100%). When Byte 1 is 1 or 2, this byte indicates the step value of color temperature (1 to 100%).</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Stepless color temperature adjustment: 0x0C</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Start incrementing. 1 – Start decrementing. 2 – Stop adjustment. <br><br>Byte 2: Rate (adjustment percentage per second) <br><br>Byte 3: The target value.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Color adjustment: 0x0D</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Relative transition. 1 – The specified color. 2 – Start cycling adjustment. 3 – Stop cycling adjustment. <br><br> Byte 2: The ID of the specified color when Byte 1 is 1.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Hue adjustment: 0x0E</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Hue value. 1 – Hue up. 2 – Hue down. <br><br>Byte 2: When Byte 1 is 0, this byte indicates hue percentage (1 to 100%). When Byte 1 is 1 or 2, this byte indicates the step value of hue (1 to 100%).</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Stepless hue adjustment：0x0F</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Start incrementing. 1 – Start decrementing. 2 – Stop adjustment. <br><br>Byte 2: Rate (adjustment percentage per second) <br><br>Byte 3: The target value.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Saturation adjustment: 0x10</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Saturation value. 1 – Saturation up. 2 – Saturation down. <br><br>Byte 2: When Byte 1 is 0, this byte indicates saturation percentage (1 to 100%). When Byte 1 is 1 or 2, this byte indicates the step value of saturation (1 to 100%).</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Stepless saturation adjustment: 0x11</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Start incrementing. 1 – Start decrementing. 2 – Stop adjustment. <br><br>Byte 2: Rate (adjustment percentage per second) <br><br>Byte 3: The target value.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Value adjustment: 0x12</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Value. 1 – Value up. 2 – Value down. <br><br>Byte 2: When Byte 1 is 0, this byte indicates value percentage (1 to 100%). When Byte 1 is 1 or 2, this byte indicates the step value of value (1 to 100%).</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Stepless value adjustment: 0x13</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Start incrementing. 1 – Start decrementing. 2 – Stop adjustment. <br><br>Byte 2: Rate (adjustment percentage per second) <br><br>Byte 3: The target value.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>HSV (hue, saturation, value) adjustment: 0x14</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: Hue percentage  (0 to 100%)  <br><br>Byte 2: Saturation (0 to 100%)  <br><br>Byte 3: Value percentage (0 to 100%)</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Scene adjustment: 0x15</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Relative transition. 1 – The specified scene. 2 – Start cycling adjustment. 3 – Stop cycling adjustment.  <br><br>Byte 2: The ID of the specified scene when Byte 1 is 1.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Lighting mode selection: 0x16</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 1 – Night light mode.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Motor rotation adjustment: 0x20</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Clockwise rotation. 1 – Counterclockwise rotation. 2 – Pause. <br><br>Byte 2: Travel percentage (0 to 100%). 0 – Continuous rotation. <br><br>Byte 3: The number of channels. 0 represents the total channel.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Motor travel setting : 0x21</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – The start position. 1 – The fine-tuning position. 2 – The end position. <br><br>Byte 2: 0 – The up limit. 1 – The down limit. 2 – The intermediate limit. <br><br>Byte 3: The number of channels. 0 represents the total channel.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Movement speed adjustment: 0x22</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Speed. 1 – Step increment. 2 – Step decrement.  <br><br>Byte 2: The specified speed or step value of speed. Byte 3: The number of channels. 0 represents the total channel.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Stepless movement speed adjustment: 0x23</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Start incrementing. 1 – Start decrementing. 2 – Stop adjustment. <br><br>Byte 2: Rate (adjustment percentage per second) <br><br>Byte 3: The target value. Byte 4: The number of channels. 0 represents the total channel.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Temperature adjustment: 0x24</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – The temperature value. 1 – Temperature up. 2 – Temperature down. <br><br>Bytes 2 to 3:  When Byte 1 is 0, this byte indicates the specified temperature. When Byte 1 is 1 or 2, this byte indicates the step value of temperature. The 2-byte temperature value is stored in big-endian. The most significant bit represents the sign (minus or plus) and the rest of the bits represent the number. The number multiplied by 0.1°C is the actual temperature.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Stepless temperature adjustment: 0x25</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Start incrementing. 1 – Start decrementing. 2 – Stop adjustment. <br><br>Byte 2: Rate (adjustment percentage per second) <br><br>Bytes 3 to 4: The target value of temperature, which is calculated same as above.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Humidity adjustment: 0x26</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Humidity value. 1 – Humidity up. 2 – Humidity down. <br><br>Byte 2: The specified humidity.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Stepless humidity adjustment: 0x27</td>
    <td class="tg-0lax" colspan="2"><br>Byte 1: 0 – Start incrementing. 1 – Start decrementing. 2 – Stop adjustment. <br><br>Byte 2: Rate (adjustment percentage per second) <br><br>Byte 3: The target value.</td>
  </tr>
  <tr>
    <td class="tg-0lax" colspan="3"><br>Custom command</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Custom category (1 byte)</td>
    <td class="tg-0lax"><br>Custom command (1 byte)</td>
    <td class="tg-0lax"><br>Parameter (3 bytes)</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Lights: 0xFF</td>
    <td class="tg-0lax"><br>RGBY (red, green, blue, yellow)  adjustment：0x01</td>
    <td class="tg-0lax"><br>Byte 1: 0 – Change color to red.  1 – Change color to green.  2 – Change color to blue.  3 – Change color to yellow.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Fan: 0xFE</td>
    <td class="tg-0lax"><br>Fan mode: 0x01</td>
    <td class="tg-0lax"><br>Byte 1: 0 – Manual adjustment. 1 – Natural wind.  2: Sleep wind.</td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Bathroom heater: 0xFD</td>
    <td class="tg-0lax"><br>Bathroom heater mode: 0x01</td>
    <td class="tg-0lax"><br>Byte 1: 0 – Heating. 1 – Ventilation. 2 – Drying. 3 – Fan. </td>
  </tr>
  <tr>
    <td class="tg-0lax"><br>Air conditioner: 0xFC</td>
    <td class="tg-0lax"><br>Sleep: 0x01</td>
    <td class="tg-0lax"><br>Byte 1: 0 – Off. 1 – On.</td>
  </tr>
</tbody>
</table>
<h3 id="title-41-Report%20and%20send%20data%20of%20extended%20DPs" class="comp-markdown-title">Report and send data of extended DPs<i class="iconfont lianjie"></i></h3>
<div styled-block="" data-style-important=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><p>This feature only applies to voice services.</p>
</div></div>
<h4 id="subtitle-88-Enable%20the%20extended%20DP%20service" class="comp-markdown-title">Enable the extended DP service<i class="iconfont lianjie"></i></h4>
<ul>
<li>
<p>This service extends the source of data sending to LAN, WAN, and Bluetooth.</p>
</li>
<li>
<p>This service conflicts with <a href="#send-commands">Send commands</a>.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x36</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x01</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x00: disable the extended DP service. </li><li>0x01: enable the extended DP service. </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 03 36 00 02 01 01 3c</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x36</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x0002</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x01</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: The service is enabled or disabled.  </li><li>0x01: Failed to enable or disable the service.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 36 00 02 01 00 38</code></p>
<p><a id="Send-commands-of-extended-DPs"></a></p>
<h4 id="subtitle-89-Send%20commands%20of%20extended%20DPs" class="comp-markdown-title">Send commands of extended DPs<i class="iconfont lianjie"></i></h4>
<ul>
<li>
<p>For more information, see<a href="#StatusDataType">Data units</a>.</p>
</li>
<li>
<p>A command can contain data units of multiple DPs.</p>
</li>
<li>
<p>The module sends control commands and the MCU reports DP status, which occurs asynchronously.</p>
</li>
<li>
<p>The source of extended DP data sending must be set manually, which <strong>conflicts</strong> with the <a href="#send-commands">Send commands</a> and <a href="#MonitorDeviceConnection">Report status</a>.</p>
</li>
</ul>
<p><strong>The module sends the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x36</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>Depends on the type and number of data units (N+2).</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x02</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>The source of data sending: <ul><li>0x00: unknown sources. </li><li>0x01: LAN. </li><li>0x02: WAN </li><li>0x03: scheduled tasks in LAN. </li><li>0x04: scene linkage in WAN. </li><li>0x05: reliable channels. </li><li>0x06: Bluetooth. </li><li>0x07: scene linkage in LAN. </li><li>0xF0: offline voice modules. </li></ul></td>
</tr>
<tr>
<td></td>
<td>N</td>
<td><a href="#StatusDataType">Data units</a></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, in LAN, if DP 3 of a boolean type is used for on/off control, and <code>1</code> means to turn on the device, the module will send the following command.</p>
<p>For example, <code>55 aa 00 36 0007 02 01 03 01 0001 01 45</code></p>
<h4 id="subtitle-90-Report%20status%20of%20extended%20DPs" class="comp-markdown-title">Report status of extended DPs<i class="iconfont lianjie"></i></h4>
<ul>
<li>
<p>This feature only applies to offline voice modules.</p>
</li>
<li>
<p>For more information, see Data unit.</p>
</li>
<li>
<p>The MCU asynchronously reports DP status, which can be triggered by three mechanisms.</p>
</li>
<li>
<p>After the MCU executes the command of extended DPs from the module, it reports the changed status of extended DPs to the module.</p>
</li>
<li>
<p>When the MCU proactively detects status changes of DPs, it reports the changed DP status to the module.</p>
</li>
<li>
<p>When the MCU receives DP status queries, it sends the status of all DPs to the module.</p>
</li>
<li>
<p>The MCU can report data units of multiple DPs.</p>
</li>
</ul>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x36</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>Depends on the type and number of data units (N+3).</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>Subcommand: 0x03</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li>0x00: The MCU proactively reports status. </li><li>0x01: The MCU responds to status queries. </li><li>0x02: The MCU responds to commands of extended DPs. </li></ul></td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>When the MCU proactively reports DP status or responds to status queries, it responds to the data source requested by <a href="#send-commands-of-extended-dps">Send commands of extended DPs</a> with <code>0x00</code>.  <ul><li> 0x00: unknown sources. </li><li>0x01: LAN. </li><li>0x02: WAN </li><li>0x03: scheduled tasks in LAN. </li><li>0x04: scene linkage in WAN. </li><li>0x05: reliable channels. </li><li>0x06: Bluetooth. </li><li>0x07: scene linkage in LAN. </li><li>0xF0: offline voice modules. </li></ul></td>
</tr>
<tr>
<td></td>
<td>N</td>
<td><a href="#StatusDataType">Data units</a></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, in WAN, if the DP 5 of value type indicates the current humidity of 30%, the MCU sends the following command to the module.</p>
<p>For example, <code>55 aa 03 36 000b 03 02 02  05 02 0004 0000001e  73</code></p>
<h3 id="title-42-(Optional)%20Smart%20fan%20features" class="comp-markdown-title">(Optional) Smart fan features<i class="iconfont lianjie"></i></h3>
<p>This section only applies to specific fan categories.</p>
<h4 id="subtitle-92-Fan%20functional%20test" class="comp-markdown-title">Fan functional test<i class="iconfont lianjie"></i></h4>
<p>For example, a fan with a step of 20 and a hold-time of five seconds. The module can adjust the motor to 0%, 20%, 40%, 60%, 80%, and 100% in sequence at an interval of five seconds.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x72</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x03</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x01 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>0x0a: step of fan speed, ranging from 1 to 99.</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>0x05: the speed level hold-time, ranging from 1 to 100 seconds.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-27" originaltext="03 72 00 03 01" callelement="+81372000301" class="dcelink">03 72 00 03 01</avayaelement></avayaelement> 0a 05 87</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x72</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x01 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x00: success. </li><li>0x01: failure.  </li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 72 00 02 01 00 74 </code></p>
<h4 id="subtitle-93-Set%20duty%20cycle" class="comp-markdown-title">Set duty cycle<i class="iconfont lianjie"></i></h4>
<p>If the duty cycle is set to 70%, PWM1 outputs 70%, and PWM2 outputs 0%. If zero-crossing is detected, PWM1 outputs 0% and PWM2 outputs 70%.</p>
<p>The MCU sends the following command.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Length</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x03</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x72</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x02 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td>0x0a: ranging from 0% to 100%.</td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa <avayaelement class="contentWrapper"><avayaelement id="dceLink-28" originaltext="03 72 00 02 02" callelement="+81372000202" class="dcelink">03 72 00 02 02</avayaelement></avayaelement> 0a 82</code></p>
<p><strong>The module returns the following command.</strong></p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Bytes</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Header</td>
<td>2</td>
<td>0x55aa</td>
</tr>
<tr>
<td>Version</td>
<td>1</td>
<td>0x00</td>
</tr>
<tr>
<td>Command</td>
<td>1</td>
<td>0x72</td>
</tr>
<tr>
<td>Data length</td>
<td>2</td>
<td>0x02</td>
</tr>
<tr>
<td>Data</td>
<td>1</td>
<td>0x02 (sub-command)</td>
</tr>
<tr>
<td></td>
<td>1</td>
<td><ul><li> 0x00: success. </li><li>0x01: failure.</li></ul></td>
</tr>
<tr>
<td>Checksum</td>
<td>1</td>
<td>Start from the header, add up all the bytes, and then divide the sum by 256 to get the remainder.</td>
</tr>
</tbody>
</table>
<p>For example, <code>55 aa 00 72 00 02 02 00 75 </code></p>
<h2 id="title-43-Appendix" class="comp-markdown-title">Appendix<i class="iconfont lianjie"></i></h2>
<div styled-block="" data-style-warn=""><div class="styled-block-title"><span class="styled-block-title-icon"></span><span class="styled-block-title-label"></span></div><div class="styled-block-content"><p>This appendix only provides the defined contents. Do not use any undefined content.</p>
</div></div>
<p><a id="appendix1"></a></p>
<h3 id="title-44-Appendix%201%3A%20Module%20information" class="comp-markdown-title">Appendix 1: Module information<i class="iconfont lianjie"></i></h3>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
<th><strong>Options</strong></th>
<th><strong>Obtain</strong></th>
<th><strong>Set</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cc</td>
<td>Country code</td>
<td>0: applies to Chinese mainland, Korea, Singapore, Australia, Japan (1-13), and others. <br>    1: applies to the United States, Taiwan (China), and Canada. <br>    2: applies to Japan (1-14) <br>3: applies to Europe</td>
<td>Supported</td>
<td>Not supported</td>
</tr>
<tr>
<td>ap</td>
<td>Access point (AP)</td>
<td>String</td>
<td>Supported</td>
<td>Not supported</td>
</tr>
<tr>
<td>sn</td>
<td>Serial number (SN) of the module</td>
<td>The SN written to the module.</td>
<td>Not supported</td>
<td>Not supported</td>
</tr>
<tr>
<td>ffs</td>
<td>Indicates whether a module has FFS authorization information.</td>
<td>0: A module does not have FFS authorization information. <br>  1: A module has FFS authorization information.</td>
<td>Supported</td>
<td>Not supported</td>
</tr>
</tbody>
</table>
<p><a id="appendix2"></a></p>
<h3 id="title-45-Appendix%202%3A%20File%20download%20exceptions" class="comp-markdown-title">Appendix 2: File download exceptions<i class="iconfont lianjie"></i></h3>
<table>
<thead>
<tr>
<th>Description</th>
<th>Status value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Device is shut down.</td>
<td>0x00</td>
</tr>
<tr>
<td>File transfer times out.</td>
<td>0x01</td>
</tr>
<tr>
<td>Battery level is low.</td>
<td>0x02</td>
</tr>
<tr>
<td>Device is overheating.</td>
<td>0x03</td>
</tr>
<tr>
<td>File is large.</td>
<td>0x04</td>
</tr>
<tr>
<td>Memory is not enough.</td>
<td>0x05</td>
</tr>
<tr>
<td>Operation anomaly occurs. <br>For example, out of paper, paper jam, and cover open.</td>
<td>0x06</td>
</tr>
</tbody>
</table>
<p><a id="appendix3"></a></p>
<h3 id="title-46-Appendix%203%3A%20File%20transfer%20status" class="comp-markdown-title">Appendix 3: File transfer status<i class="iconfont lianjie"></i></h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Description</th>
<th>Status value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Status 1</td>
<td>No file transfer task.</td>
<td>0x00</td>
</tr>
<tr>
<td>Status 2</td>
<td>File transfer is starting.</td>
<td>0x01</td>
</tr>
<tr>
<td>Status 3</td>
<td>File transfer is in progress.</td>
<td>0x02</td>
</tr>
<tr>
<td>Status 4</td>
<td>File transfer/download is completed.</td>
<td>0x03</td>
</tr>
<tr>
<td>Status 5</td>
<td>File upload to the server succeeded.</td>
<td>0x04</td>
</tr>
<tr>
<td>Status 6</td>
<td>File transfer with the MCU times out.</td>
<td>0x05</td>
</tr>
<tr>
<td>Status 7</td>
<td>Failed to get the URL for file upload.</td>
<td>0x06</td>
</tr>
<tr>
<td>Status 8</td>
<td>Failed to upload the file to the server.</td>
<td>0x07</td>
</tr>
<tr>
<td>Status 9</td>
<td>Failed to get the file from the server.</td>
<td>0x08</td>
</tr>
<tr>
<td>Status 10</td>
<td>The MCU fails to respond to file transfer.</td>
<td>0x09</td>
</tr>
</tbody>
</table>
<p><a id="appendix4"></a></p>
<h3 id="title-47-Appendix%204%3A%20OTA%20MCU%20firmware%20update" class="comp-markdown-title">Appendix 4: OTA MCU firmware update<i class="iconfont lianjie"></i></h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Description</th>
<th>Status value</th>
</tr>
</thead>
<tbody>
<tr>
<td>Status 1</td>
<td>Start update.</td>
<td>0x00</td>
</tr>
<tr>
<td>Status 2</td>
<td>Update is in progress.</td>
<td>0x01</td>
</tr>
<tr>
<td>Status 3</td>
<td>Update is completed.</td>
<td>0x02</td>
</tr>
<tr>
<td>Status 4</td>
<td>Update failed.</td>
<td>0x03</td>
</tr>
</tbody>
</table>
<p><a id="appendix5"></a></p>
<h3 id="title-48-Appendix%205%3A%20File%20type" class="comp-markdown-title">Appendix 5: File type<i class="iconfont lianjie"></i></h3>
<table>
<thead>
<tr>
<th><strong>Description</strong></th>
<th><strong>Value</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>TXT</td>
<td>1</td>
</tr>
<tr>
<td>DOC</td>
<td>2</td>
</tr>
<tr>
<td>PDF</td>
<td>3</td>
</tr>
<tr>
<td>EXCEL</td>
<td>4</td>
</tr>
<tr>
<td>PNG</td>
<td>5</td>
</tr>
<tr>
<td>JPG</td>
<td>6</td>
</tr>
<tr>
<td>BMP</td>
<td>7</td>
</tr>
<tr>
<td>TIF</td>
<td>8</td>
</tr>
<tr>
<td>GIF</td>
<td>9</td>
</tr>
<tr>
<td>PCX</td>
<td>10</td>
</tr>
<tr>
<td>TGA</td>
<td>11</td>
</tr>
<tr>
<td>Exif</td>
<td>12</td>
</tr>
<tr>
<td>FPX</td>
<td>13</td>
</tr>
<tr>
<td>SVG</td>
<td>14</td>
</tr>
<tr>
<td>PSD</td>
<td>15</td>
</tr>
<tr>
<td>CDR</td>
<td>16</td>
</tr>
<tr>
<td>PCD</td>
<td>17</td>
</tr>
<tr>
<td>DXF</td>
<td>18</td>
</tr>
<tr>
<td>UFO</td>
<td>19</td>
</tr>
<tr>
<td>EPS</td>
<td>20</td>
</tr>
<tr>
<td>AI</td>
<td>21</td>
</tr>
<tr>
<td>Raw</td>
<td>22</td>
</tr>
<tr>
<td>WMF</td>
<td>23</td>
</tr>
<tr>
<td>WebP</td>
<td>24</td>
</tr>
<tr>
<td>AVIF</td>
<td>25</td>
</tr>
<tr>
<td>WAV</td>
<td>26</td>
</tr>
<tr>
<td>FLAC</td>
<td>27</td>
</tr>
<tr>
<td>APE</td>
<td>28</td>
</tr>
<tr>
<td>ALAC</td>
<td>29</td>
</tr>
<tr>
<td>WavPack (WV)</td>
<td>30</td>
</tr>
<tr>
<td>MP3</td>
<td>31</td>
</tr>
<tr>
<td>AAC</td>
<td>32</td>
</tr>
<tr>
<td>Ogg Vorbis</td>
<td>33</td>
</tr>
<tr>
<td>Opus</td>
<td>34</td>
</tr>
<tr>
<td>MP4</td>
<td>35</td>
</tr>
</tbody>
</table>
<h2 id="title-49-Version%20history" class="comp-markdown-title">Version history<i class="iconfont lianjie"></i></h2>
<table>
<thead>
<tr>
<th>Version</th>
<th>Description</th>
<th>Date</th>
<th>Note</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.2.5</td>
<td>Modified</td>
<td>June 16, 2022</td>
<td>1. Added file download feature. <br> 2. Added the protocol for Bluetooth/Beacon remote control. <br> 3. Added the protocol for Bluetooth connection status notification.</td>
</tr>
<tr>
<td>1.2.4</td>
<td>Modified</td>
<td>July 1, 2021</td>
<td>1. Added support for multiple types of MCU firmware.  <br>2. Added RF protocols.  <br>3. Added support for getting Wi-Fi module information. <br>4. Added IR status indicator. <br>5. Updated voice module feature extension. <br>6. Added features of Bluetooth remote controls. <br>7. Added features of fans.</td>
</tr>
<tr>
<td>1.2.3</td>
<td>Modified</td>
<td>May 21, 2020</td>
<td>1. Added fields of IR feature and low-power mode enablement in the production info packet. <br>2. Added commands of proactively weather service requests. <br>3. Added command of notification of module reset. <br>4. Modified the description of module working mode.</td>
</tr>
<tr>
<td>1.2.2</td>
<td>Modified</td>
<td>April 11, 2020</td>
<td>Add features of voice module VWXR2, including play/pause, Bluetooth on/off, local alarm, and group control.</td>
</tr>
<tr>
<td>1.2.1</td>
<td>Modified</td>
<td>April 9, 2020</td>
<td>1. Added Wi-Fi functional test. <br>2. Added Wi-Fi remote control feature.</td>
</tr>
<tr>
<td>1.2.0</td>
<td>Modified</td>
<td>March 31, 2020</td>
<td>Added features to adapt to CI baseline. Added fields of network status and production information.</td>
</tr>
<tr>
<td>1.1.9</td>
<td>Modified</td>
<td>March 26, 2020</td>
<td>1. Updated voice service protocols. <br>2. Add extension features for modules. <br>3. Added production test for Wi-Fi and Bluetooth LE combo module.</td>
</tr>
<tr>
<td>1.1.8</td>
<td>Modified</td>
<td>February 18, 2020</td>
<td>1. Added volume setting for voice module VWXR2. <br>2. Added production test for audio and wake-up.</td>
</tr>
<tr>
<td>1.1.7</td>
<td>Modified</td>
<td>November 19, 2019</td>
<td>1. Added map data streaming for multiple maps. <br>2. Added channels for third-party file download.<br> 3. Updated protocol description.</td>
</tr>
<tr>
<td>1.1.6</td>
<td>Modified</td>
<td>August 28, 2019</td>
<td>Added IR features.</td>
</tr>
<tr>
<td>1.1.5</td>
<td>Modified</td>
<td>August 24, 2019</td>
<td>1. Added interface to get the MAC address of the module. <br>2. Updated description of requesting weather data.</td>
</tr>
<tr>
<td>1.1.4</td>
<td>Modified</td>
<td>June 17, 2019</td>
<td>1. Added performance test for Wi-Fi connection modes. <br>2. Updated streaming service.</td>
</tr>
<tr>
<td>1.1.3</td>
<td>Modified</td>
<td>April 15, 2019</td>
<td>1. Updated the description of commands. <br>2. Added features of robot vacuum.</td>
</tr>
<tr>
<td>1.1.2</td>
<td>Modified</td>
<td>December 17, 2018</td>
<td>1. Added pairing via serial port. <br>2. Added commands for the MCU to get the Wi-Fi network status.</td>
</tr>
<tr>
<td>1.1.1</td>
<td>Modified</td>
<td>August 10, 2018</td>
<td>Updated the returns from the MCU to respond to the firmware update. (legacy version is compatible)</td>
</tr>
<tr>
<td>1.1.0</td>
<td>Modified</td>
<td>March 29, 2018</td>
<td>Added the feature of turning off heartbeats.</td>
</tr>
<tr>
<td>1.0.9</td>
<td>Modified</td>
<td>January 19, 2018</td>
<td>1. Added synchronous reporting, enabling the module to return the report result on each data reporting task. <br>2. Added the feature to getting Wi-Fi signal strength, in dB.</td>
</tr>
<tr>
<td>1.0.8</td>
<td>Modified</td>
<td>May 12, 2017</td>
<td>1. Added the interface to enable weather service. <br>2. Added the interface to send the weather data to the MCU. <br>3. Modified the heartbeat interval to 15 seconds.</td>
</tr>
<tr>
<td>1.0.7</td>
<td>Modified</td>
<td>February 16, 2017</td>
<td>1. Added pairing mode setting, with an extended interface for product information query. <br>2. Updated the command to query MCU version number to <code>0x03</code>.</td>
</tr>
<tr>
<td>1.0.6</td>
<td>Modified</td>
<td>November 10, 2016</td>
<td>1. Added Wi-Fi working status. <br>2. Updated the command to query MCU version number to <code>0x02</code>.</td>
</tr>
<tr>
<td>1.0.5</td>
<td>Modified</td>
<td>June 7, 2016</td>
<td>1. Deleted update query command. <br>2. Delete the command used to notify the MCU to enter test mode. <br>3. Modified the protocol of starting firmware update, support for files over 64 KB in size.</td>
</tr>
<tr>
<td>1.0.4</td>
<td>Modified</td>
<td>May 12, 2016</td>
<td>1. Added the command to get the local time. <br>2. Added Wi-Fi functional test. <br>3. Added the command to get the module memory.</td>
</tr>
<tr>
<td>1.0.3</td>
<td>Modified</td>
<td>November 14, 2015</td>
<td>1. Added the command for the MCU to get the time data. <br>2. Added the command for the MCU to get the time zone. <br>3. Added the feature to enter test mode.</td>
</tr>
<tr>
<td>1.0.2</td>
<td>Modified</td>
<td>October 17, 2015</td>
<td>1. Added the feature of MCU restart detection in the heartbeat mechanism. <br>2. Modified the interval of heartbeat detection to 10 seconds. <br>3. Modified the proactive Wi-Fi status reporting to sending Wi-Fi status to the MCU.</td>
</tr>
<tr>
<td>1.0.1</td>
<td>Modified</td>
<td>October 13, 2015</td>
<td>1. Modified product ID query to module information query. <br> 2. Added returning version number.</td>
</tr>
<tr>
<td>1.0.0</td>
<td>Create</td>
<td>October 10, 2015</td>
<td>The first release.</td>
</tr>
</tbody>
</table></div>