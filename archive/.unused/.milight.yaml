substitutions:
  device_name: mitest
  friendly_name: Test

# esphome:
#   name: $device_name
  # platform: ESP8266
  # board: d1_mini
#   includes:
#   - milight

esphome:
  name: mitest
  platform: ESP8266
  board: d1_mini
  includes:
  - milight
  # libraries:
  #   - "FS"
  #   - "SPIFFS"
  #   - "SPI"
  #   - "RF24"
  #   - "https://github.com/ratkins/RGBConverter"
  #   - "CircularBuffer"
  #   - "PathVariableHandlers"
  #   - "https://github.com/luisllamasbinaburo/Arduino-List"
  #   - "ArduinoJson"
  #   - "ArduinoJson-esphomelib"

external_components:
- source: github://hencou/esphome_components
  components: mi

# esp32:
#   board: esp32dev
#   framework:
#     type: arduino
    
wifi:
    ssid: !secret wifi_all_ssid
    password: !secret wifi_all_password

    # Enable fallback hotspot (captive portal) in case wifi connection fails
    ap:
      ssid: ${device_ssid}
      password: !secret ap_password

captive_portal:

# Enable logging
# Example configuration entry
debug:

# Logger must be at least debug (default)
logger:
  level: debug

# Enable Home Assistant API
api:
  password: !secret api_password

ota:
  safe_mode: true
  password: !secret ota_password

# web_server:
#   port: 80

button:
- platform: mi
  id: pair
  name: ${friendly_name} pair
  device_id: 0xAB01
  group_id: 1
  remote_type: rgb_cct
  command: pair
  entity_category: config
- platform: mi
  id: unpair
  name: ${friendly_name} unpair
  device_id: 0xAB01
  group_id: 1
  remote_type: rgb_cct
  command: unpair
  entity_category: config

mi:

light:
- platform: mi
  id: light1
  name: ${friendly_name}
  device_id: 0xAB01
  group_id: 1
  remote_type: rgb_cct